
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Custom Operator Generation System">
      
      
      
      
        <link rel="prev" href="../condition_generator/">
      
      
        <link rel="next" href="../operator_manager/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>OperatorGenerator.md - Opulse</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#opulse.operatorplus.operator_generator" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Opulse" class="md-header__button md-logo" aria-label="Opulse" data-md-component="logo">
      
  <img src="../../assets/images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Opulse
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OperatorGenerator.md
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/opulse-exp/op_plus.git" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Opulse
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Opulse" class="md-nav__button md-logo" aria-label="Opulse" data-md-component="logo">
      
  <img src="../../assets/images/logo.png" alt="logo">

    </a>
    Opulse
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/opulse-exp/op_plus.git" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Opulse
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Config
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Config
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/generate_operator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operator Config
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../config/generate_expression/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Expression Config
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CoreAPI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            CoreAPI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Operatorplus
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Operatorplus
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operator_info/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OperatorInfo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../condition_generator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ConditionGenerator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    OperatorGenerator.md
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    OperatorGenerator.md
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator" class="md-nav__link">
    <span class="md-ellipsis">
      operator_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      OperatorGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OperatorGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.create_operator_info" class="md-nav__link">
    <span class="md-ellipsis">
      create_operator_info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_base_operators" class="md-nav__link">
    <span class="md-ellipsis">
      generate_base_operators
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_branches" class="md-nav__link">
    <span class="md-ellipsis">
      generate_branches
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_definition" class="md-nav__link">
    <span class="md-ellipsis">
      generate_definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_lhs" class="md-nav__link">
    <span class="md-ellipsis">
      generate_lhs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_operator_data_by_definition" class="md-nav__link">
    <span class="md-ellipsis">
      generate_operator_data_by_definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_recursive_call" class="md-nav__link">
    <span class="md-ellipsis">
      generate_recursive_call
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_recursive_operator_data_by_loop" class="md-nav__link">
    <span class="md-ellipsis">
      generate_recursive_operator_data_by_loop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.get_random_recursive_call_operator" class="md-nav__link">
    <span class="md-ellipsis">
      get_random_recursive_call_operator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.get_unicode_symbols" class="md-nav__link">
    <span class="md-ellipsis">
      get_unicode_symbols
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.random_operator" class="md-nav__link">
    <span class="md-ellipsis">
      random_operator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.random_operator_type_and_position" class="md-nav__link">
    <span class="md-ellipsis">
      random_operator_type_and_position
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operator_manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OperatorManager.md
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operator_definition_parser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OperatorDefinitionParser.md
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operator_transformer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OperatorTransformer.md
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compiler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CythonCompiler
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operator_priority_manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OperatorPriorityManager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operator_dependency_graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OperatorDependencyGraph
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Expression
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Expression
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../expression/expression_node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ExpressionNode
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../expression/expression_generator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ExpressionGenerator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../expression/base_converter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BaseConverter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../expression/expression_base_converter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ExpressionBaseConverter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../expression/expression_evaluator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ExpressionEvaluator
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Generate
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Generate
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generate_operator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operator Generate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generate_expression/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Expression Generate
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator" class="md-nav__link">
    <span class="md-ellipsis">
      operator_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      OperatorGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OperatorGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.create_operator_info" class="md-nav__link">
    <span class="md-ellipsis">
      create_operator_info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_base_operators" class="md-nav__link">
    <span class="md-ellipsis">
      generate_base_operators
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_branches" class="md-nav__link">
    <span class="md-ellipsis">
      generate_branches
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_definition" class="md-nav__link">
    <span class="md-ellipsis">
      generate_definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_lhs" class="md-nav__link">
    <span class="md-ellipsis">
      generate_lhs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_operator_data_by_definition" class="md-nav__link">
    <span class="md-ellipsis">
      generate_operator_data_by_definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_recursive_call" class="md-nav__link">
    <span class="md-ellipsis">
      generate_recursive_call
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.generate_recursive_operator_data_by_loop" class="md-nav__link">
    <span class="md-ellipsis">
      generate_recursive_operator_data_by_loop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.get_random_recursive_call_operator" class="md-nav__link">
    <span class="md-ellipsis">
      get_random_recursive_call_operator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.get_unicode_symbols" class="md-nav__link">
    <span class="md-ellipsis">
      get_unicode_symbols
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.random_operator" class="md-nav__link">
    <span class="md-ellipsis">
      random_operator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opulse.operatorplus.operator_generator.OperatorGenerator.random_operator_type_and_position" class="md-nav__link">
    <span class="md-ellipsis">
      random_operator_type_and_position
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>OperatorGenerator.md</h1>

<div class="doc doc-object doc-module">



<a id="opulse.operatorplus.operator_generator"></a>
    <div class="doc doc-contents first">








  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="opulse.operatorplus.operator_generator.OperatorGenerator" class="doc doc-heading">
            <code>OperatorGenerator</code>


</h2>


    <div class="doc doc-contents ">







              <details class="quote">
                <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  15</span>
<span class="normal">  16</span>
<span class="normal">  17</span>
<span class="normal">  18</span>
<span class="normal">  19</span>
<span class="normal">  20</span>
<span class="normal">  21</span>
<span class="normal">  22</span>
<span class="normal">  23</span>
<span class="normal">  24</span>
<span class="normal">  25</span>
<span class="normal">  26</span>
<span class="normal">  27</span>
<span class="normal">  28</span>
<span class="normal">  29</span>
<span class="normal">  30</span>
<span class="normal">  31</span>
<span class="normal">  32</span>
<span class="normal">  33</span>
<span class="normal">  34</span>
<span class="normal">  35</span>
<span class="normal">  36</span>
<span class="normal">  37</span>
<span class="normal">  38</span>
<span class="normal">  39</span>
<span class="normal">  40</span>
<span class="normal">  41</span>
<span class="normal">  42</span>
<span class="normal">  43</span>
<span class="normal">  44</span>
<span class="normal">  45</span>
<span class="normal">  46</span>
<span class="normal">  47</span>
<span class="normal">  48</span>
<span class="normal">  49</span>
<span class="normal">  50</span>
<span class="normal">  51</span>
<span class="normal">  52</span>
<span class="normal">  53</span>
<span class="normal">  54</span>
<span class="normal">  55</span>
<span class="normal">  56</span>
<span class="normal">  57</span>
<span class="normal">  58</span>
<span class="normal">  59</span>
<span class="normal">  60</span>
<span class="normal">  61</span>
<span class="normal">  62</span>
<span class="normal">  63</span>
<span class="normal">  64</span>
<span class="normal">  65</span>
<span class="normal">  66</span>
<span class="normal">  67</span>
<span class="normal">  68</span>
<span class="normal">  69</span>
<span class="normal">  70</span>
<span class="normal">  71</span>
<span class="normal">  72</span>
<span class="normal">  73</span>
<span class="normal">  74</span>
<span class="normal">  75</span>
<span class="normal">  76</span>
<span class="normal">  77</span>
<span class="normal">  78</span>
<span class="normal">  79</span>
<span class="normal">  80</span>
<span class="normal">  81</span>
<span class="normal">  82</span>
<span class="normal">  83</span>
<span class="normal">  84</span>
<span class="normal">  85</span>
<span class="normal">  86</span>
<span class="normal">  87</span>
<span class="normal">  88</span>
<span class="normal">  89</span>
<span class="normal">  90</span>
<span class="normal">  91</span>
<span class="normal">  92</span>
<span class="normal">  93</span>
<span class="normal">  94</span>
<span class="normal">  95</span>
<span class="normal">  96</span>
<span class="normal">  97</span>
<span class="normal">  98</span>
<span class="normal">  99</span>
<span class="normal"> 100</span>
<span class="normal"> 101</span>
<span class="normal"> 102</span>
<span class="normal"> 103</span>
<span class="normal"> 104</span>
<span class="normal"> 105</span>
<span class="normal"> 106</span>
<span class="normal"> 107</span>
<span class="normal"> 108</span>
<span class="normal"> 109</span>
<span class="normal"> 110</span>
<span class="normal"> 111</span>
<span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">OperatorGenerator</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">param_config</span><span class="p">:</span> <span class="n">ParamConfig</span><span class="p">,</span>
        <span class="n">logger</span><span class="p">:</span> <span class="n">LogConfig</span><span class="p">,</span>
        <span class="n">condition_generator</span><span class="p">:</span> <span class="n">ConditionGenerator</span><span class="p">,</span>
        <span class="n">expr_generator</span><span class="p">:</span> <span class="n">ExpressionGenerator</span><span class="p">,</span>
        <span class="n">operator_manager</span><span class="p">:</span> <span class="n">OperatorManager</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the OperatorGenerator.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            param_config (ParamConfig): Configuration object containing parameters like symbols and operator details.</span>
<span class="sd">            logger (LogConfig): Logger configuration to handle logging functionality.</span>
<span class="sd">            condition_generator (ConditionGenerator): A generator responsible for producing conditions.</span>
<span class="sd">            expr_generator (ExpressionGenerator): A generator responsible for producing expressions.</span>
<span class="sd">            operator_manager (OperatorManager): Manages operator-related functionality.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            param_config (ParamConfig): Configuration object that holds various parameters.</span>
<span class="sd">            logger (Logger): Logger instance used for logging debug and info messages.</span>
<span class="sd">            standard_symbols (list): A list of standard operator symbols.</span>
<span class="sd">            unicode_symbols (list): A list of Unicode operator symbols.</span>
<span class="sd">            valid_symbols (list): A combined list of valid operator symbols (standard + Unicode).</span>
<span class="sd">            condition_generator (ConditionGenerator): The generator used to generate conditions.</span>
<span class="sd">            expr_generator (ExpressionGenerator): The generator used to generate expressions.</span>
<span class="sd">            operator_manager (OperatorManager): Manages operators for the generator.</span>
<span class="sd">            unary_variables (list): List of variables used in unary operations.</span>
<span class="sd">            binary_variables (list): List of variables used in binary operations.</span>
<span class="sd">            max_base (int): Maximum base value used in the generation process.</span>
<span class="sd">            operator_symbol_min_len (int): Minimum length for operator symbols.</span>
<span class="sd">            operator_symbol_max_len (int): Maximum length for operator symbols.</span>
<span class="sd">            max_if_branches (int): Maximum number of branches in conditional expressions.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span> <span class="o">=</span> <span class="n">param_config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>  <span class="c1"># Get logger instance for logging</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">standard_symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;basic_operator_symbols&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicode_symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_unicode_symbols</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valid_symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">standard_symbols</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">unicode_symbols</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">condition_generator</span> <span class="o">=</span> <span class="n">condition_generator</span>  <span class="c1"># Condition generator instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span> <span class="o">=</span> <span class="n">expr_generator</span>  <span class="c1"># Expression generator instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span> <span class="o">=</span> <span class="n">operator_manager</span>  <span class="c1"># Operator manager instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unary_variables</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">binary_variables</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">],</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_base&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operator_symbol_min_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;operator_symbol_min_len&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operator_symbol_max_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;operator_symbol_max_len&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_if_branches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_if_branches&quot;</span><span class="p">)</span>

        <span class="c1"># self.expr_parser = expr_parser</span>
        <span class="c1"># self.expr_transformer = expr_transformer</span>
        <span class="c1"># Log initialization details</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;OperatorGenerator initialized with the following configuration:&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Standard symbols: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">standard_symbols</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unicode symbols: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">unicode_symbols</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Valid symbols: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">valid_symbols</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unary variables: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">unary_variables</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Binary variables: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">binary_variables</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Max base: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_base</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operator symbol min length: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">operator_symbol_min_len</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operator symbol max length: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">operator_symbol_max_len</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Max if branches: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_if_branches</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_unicode_symbols</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Collects valid Unicode operator symbols from predefined ranges.</span>

<span class="sd">        This method retrieves symbols from several mathematical and arrow ranges in Unicode:</span>
<span class="sd">        - Mathematical Operators (U+2200 to U+22FF)</span>
<span class="sd">        - Supplemental Mathematical Operators (U+2A00 to U+2AFF)</span>
<span class="sd">        - Arrows (U+2190 to U+21FF)</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: A list of valid Unicode operator symbols.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Collecting Unicode symbols from predefined ranges.&quot;</span><span class="p">)</span>
        <span class="n">unicode_ranges</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="mh">0x2200</span><span class="p">,</span> <span class="mh">0x22FF</span><span class="p">),</span>  <span class="c1"># Mathematical Operators</span>
            <span class="p">(</span><span class="mh">0x2A00</span><span class="p">,</span> <span class="mh">0x2AFF</span><span class="p">),</span>  <span class="c1"># Supplemental Mathematical Operators</span>
            <span class="p">(</span><span class="mh">0x2190</span><span class="p">,</span> <span class="mh">0x21FF</span><span class="p">),</span>  <span class="c1"># Arrows</span>
        <span class="p">]</span>

        <span class="n">symbols</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="ow">in</span> <span class="n">unicode_ranges</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">codepoint</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">char</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">codepoint</span><span class="p">)</span>
                <span class="n">symbols</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Collected </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">symbols</span><span class="p">)</span><span class="si">}</span><span class="s2"> Unicode symbols.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">symbols</span>

    <span class="k">def</span> <span class="nf">random_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">existing_symbols</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a random operator string composed of one or more valid symbols.</span>

<span class="sd">        This method generates a random operator string with a length between</span>
<span class="sd">        `operator_symbol_min_len` and `operator_symbol_max_len`, ensuring that</span>
<span class="sd">        the generated operator does not already exist in the list of `existing_symbols`.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            existing_symbols (List[str]): A list of currently existing operator symbols.</span>
<span class="sd">                                            The new symbol must not be in this list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The generated random operator string that is unique and within the specified length range.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating a random operator string.&quot;</span><span class="p">)</span>

        <span class="c1"># Loop until a unique operator is generated</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="c1"># Randomly choose a length for the operator within the specified range</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">operator_symbol_min_len</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator_symbol_max_len</span>
            <span class="p">)</span>

            <span class="c1"># Generate the new symbol by randomly picking characters from valid symbols</span>
            <span class="n">new_symbol</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valid_symbols</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="c1"># Check if the generated symbol is unique (not in existing_symbols)</span>
            <span class="k">if</span> <span class="n">new_symbol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">existing_symbols</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Generated new operator symbol: </span><span class="si">{</span><span class="n">new_symbol</span><span class="si">}</span><span class="s2"> with length </span><span class="si">{</span><span class="n">length</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">new_symbol</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Generated operator </span><span class="si">{</span><span class="n">new_symbol</span><span class="si">}</span><span class="s2"> already exists. Retrying...&quot;</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">random_operator_type_and_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a random operator type and its position (if applicable).</span>

<span class="sd">        This method randomly selects an operator type, either &quot;unary&quot; or &quot;binary&quot;.</span>
<span class="sd">        If the type is &quot;unary&quot;, it also randomly chooses its position, either &quot;prefix&quot; or &quot;postfix&quot;.</span>
<span class="sd">        For &quot;binary&quot; operators, the position is not applicable (set to None).</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: A tuple containing the operator type and its position.</span>
<span class="sd">                If the operator type is &quot;unary&quot;, the position is either &quot;prefix&quot; or &quot;postfix&quot;.</span>
<span class="sd">                If the operator type is &quot;binary&quot;, the position is None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating random operator type and position.&quot;</span><span class="p">)</span>

        <span class="c1"># Randomly select the operator type</span>
        <span class="n">op_type</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;unary&quot;</span><span class="p">,</span> <span class="s2">&quot;binary&quot;</span><span class="p">])</span>

        <span class="c1"># Initialize unary_position as None</span>
        <span class="n">unary_position</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># If the operator type is &quot;unary&quot;, randomly choose its position</span>
        <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span><span class="p">:</span>
            <span class="n">unary_position</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;prefix&quot;</span><span class="p">,</span> <span class="s2">&quot;postfix&quot;</span><span class="p">])</span>

        <span class="c1"># Log the final operator type and position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Operator type: </span><span class="si">{</span><span class="n">op_type</span><span class="si">}</span><span class="s2">, Position: </span><span class="si">{</span><span class="n">unary_position</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">unary_position</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;None&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">unary_position</span>

    <span class="k">def</span> <span class="nf">generate_base_operators</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates unary prefix operators for each base from 2 to self.max_base.</span>

<span class="sd">        This method creates a unary prefix operator for each base in the range from 2 to `self.max_base`.</span>
<span class="sd">        For each base, a random operator symbol is generated, and the operator is added to the operator manager.</span>
<span class="sd">        The operator is stored with additional properties, such as its base number and the unary position.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Starting to generate base operators for each base from 2 to max_base.&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Iterate through the range of bases from 2 to max_base</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_base</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating operator for base </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

            <span class="c1"># Get existing operator symbols to avoid duplication</span>
            <span class="n">existing_symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span><span class="o">.</span><span class="n">get_operator_symbols</span><span class="p">()</span>

            <span class="c1"># Generate a random operator symbol that isn&#39;t already used</span>
            <span class="n">op_symbol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_operator</span><span class="p">(</span><span class="n">existing_symbols</span><span class="p">)</span>

            <span class="c1"># Define operator type and position</span>
            <span class="n">op_type</span> <span class="o">=</span> <span class="s2">&quot;unary&quot;</span>
            <span class="n">op_position</span> <span class="o">=</span> <span class="s2">&quot;prefix&quot;</span>
            <span class="n">func_id</span> <span class="o">=</span> <span class="n">generate</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">alphabet</span><span class="o">=</span><span class="n">alphabet</span><span class="p">)</span>
            <span class="c1"># Construct the operator data</span>
            <span class="n">operator_data</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;func_id&quot;</span><span class="p">:</span>  <span class="n">func_id</span><span class="p">,</span>
                <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">op_symbol</span><span class="p">,</span>
                <span class="s2">&quot;n_ary&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Unary operator</span>
                <span class="s2">&quot;unary_position&quot;</span><span class="p">:</span> <span class="n">op_position</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;n_order&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;is_base&quot;</span><span class="p">:</span> <span class="n">n</span><span class="p">,</span>  <span class="c1"># Base number</span>
                <span class="s2">&quot;definition&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;definition_type&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;associativity_direction&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;op_compute_func&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;op_count_func&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;dependencies&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;is_temporary&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="p">}</span>

            <span class="n">new_base_operator</span> <span class="o">=</span> <span class="n">OperatorInfo</span><span class="p">(</span><span class="o">**</span><span class="n">operator_data</span><span class="p">)</span>

            <span class="c1"># Add the generated operator to the operator manager</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span><span class="o">.</span><span class="n">add_operator</span><span class="p">(</span><span class="n">new_base_operator</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Base operator for base </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2"> with symbol &#39;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&#39; added successfully.&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Base operator generation completed.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate_lhs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">)</span> <span class="o">-&gt;</span><span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates the left-hand side (LHS) of an expression based on the operator type and position.</span>

<span class="sd">        This method constructs the left-hand side of an expression depending on the type of operator</span>
<span class="sd">        (unary or binary) and its position (prefix or postfix). It uses the operator symbol and operands</span>
<span class="sd">        defined in the configuration.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            op_symbol (str): The operator symbol to be used in the expression (e.g., &quot;+&quot;, &quot;⊕&quot;).</span>
<span class="sd">            op_type (str): The type of the operator, either &quot;unary&quot; or &quot;binary&quot;.</span>
<span class="sd">            op_position (str): The position of the operator, either &quot;prefix&quot; or &quot;postfix&quot; (only for unary operators).</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The generated left-hand side expression as a string.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the operator type is neither &quot;unary&quot; nor &quot;binary&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Generating LHS for operator &#39;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&#39;, type &#39;</span><span class="si">{</span><span class="n">op_type</span><span class="si">}</span><span class="s2">&#39;, position &#39;</span><span class="si">{</span><span class="n">op_position</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Handle the case for unary operators</span>
        <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                <span class="n">lhs</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># e.g., &quot;-a&quot;</span>
            <span class="k">elif</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                <span class="n">lhs</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># e.g., &quot;a-&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid position &#39;</span><span class="si">{</span><span class="n">op_position</span><span class="si">}</span><span class="s2">&#39; for unary operator.&quot;</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalid position &#39;</span><span class="si">{</span><span class="n">op_position</span><span class="si">}</span><span class="s2">&#39; for unary operator.&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Handle the case for binary operators</span>
        <span class="k">elif</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;binary&quot;</span><span class="p">:</span>
            <span class="n">lhs</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># e.g., &#39;a + b&#39;, &#39;a⊕b&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid operator type &#39;</span><span class="si">{</span><span class="n">op_type</span><span class="si">}</span><span class="s2">&#39; received.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operator type must be either &#39;unary&#39; or &#39;binary&#39;.&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;LHS generated: </span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lhs</span>

    <span class="k">def</span> <span class="nf">generate_branches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a list of conditional branches for an expression, including &#39;if&#39; and &#39;else&#39; branches.</span>

<span class="sd">        This method generates a random number of &#39;if&#39; branches based on the maximum allowed number</span>
<span class="sd">        of branches (`max_if_branches`), each containing a randomly generated expression and a condition.</span>
<span class="sd">        Additionally, an &#39;else&#39; branch is added with a randomly generated expression.</span>

<span class="sd">        The format of each branch is a tuple containing the expression and the corresponding condition.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: A list of tuples, each containing a generated expression and its associated condition.</span>
<span class="sd">            Each tuple is in the form (expression, condition).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Generating branches for conditional expressions.&quot;</span><span class="p">)</span>

        <span class="n">num_if_branches</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_if_branches</span><span class="p">)</span>
        <span class="n">branches</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating </span><span class="si">{</span><span class="n">num_if_branches</span><span class="si">}</span><span class="s2"> &#39;if&#39; branches.&quot;</span><span class="p">)</span>


        <span class="n">exprs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_n_expression_str_with_order</span><span class="p">(</span>
                <span class="n">max_depth</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">max_depth</span><span class="p">),</span>
                <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span><span class="p">,</span>
                <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
                <span class="n">branch_num</span><span class="o">=</span><span class="n">num_if_branches</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">expr</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">exprs</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>  
            <span class="n">condition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">condition_generator</span><span class="o">.</span><span class="n">generate_condition_expr</span><span class="p">()</span>
            <span class="n">branches</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;if </span><span class="si">{</span><span class="n">condition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated &#39;if&#39; branch </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s2"> with condition </span><span class="si">{</span><span class="n">condition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">last_expr</span> <span class="o">=</span> <span class="n">exprs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
        <span class="n">branches</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">last_expr</span><span class="p">,</span> <span class="s2">&quot;else&quot;</span><span class="p">))</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated &#39;else&#39; branch: </span><span class="si">{</span><span class="n">last_expr</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total branches generated: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">branches</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">branches</span>

    <span class="k">def</span> <span class="nf">generate_recursive_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates recursive expressions for binary and unary operators.</span>

<span class="sd">        This function creates recursive calls for both unary and binary operators</span>
<span class="sd">        based on the following rules:</span>

<span class="sd">        For binary operators:</span>
<span class="sd">            - If b == 0, generates a basic expression involving a and b.</span>
<span class="sd">            - If b &gt; 0, generates an expression involving a and (b-1), where the expression on the right side must include (b-1).</span>
<span class="sd">            - If b &lt; 0, generates an expression involving a and (b+1), where the expression on the right side must include (b+1).</span>

<span class="sd">        For unary operators:</span>
<span class="sd">            - If a == 0, randomly generates a number.</span>
<span class="sd">            - If a &gt; 0, generates an expression solely involving (a-1), with its own symbol, and only related to (a-1).</span>
<span class="sd">            - If a &lt; 0, generates an expression solely involving (a+1), with its own symbol, and only related to (a+1).</span>

<span class="sd">        Parameters:</span>
<span class="sd">        op_symbol (str): The operator symbol (e.g., &#39;+&#39;, &#39;-&#39;, &#39;*&#39;, etc.) to be used in the expressions.</span>
<span class="sd">        op_type (str): The type of the operator. Can be either &#39;unary&#39; or &#39;binary&#39;.</span>
<span class="sd">        op_position (str): The position of the unary operator. Can be either &#39;prefix&#39; or &#39;postfix&#39; (relevant only for unary operators).</span>

<span class="sd">        Returns:</span>
<span class="sd">        str: A string representing the recursive expression for the operator, with conditions based on the values of &#39;a&#39; and &#39;b&#39;.</span>

<span class="sd">        Raises:</span>
<span class="sd">        ValueError: If the provided operator type is neither &#39;unary&#39; nor &#39;binary&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;binary&quot;</span><span class="p">:</span>
            <span class="c1"># The recursive expression for generating binary operators with operands a and b.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">],</span>
                <span class="p">]</span>
            <span class="p">)</span>

            <span class="c1"># If b == 0, generate a basic expression with a and b.</span>
            <span class="n">expr_base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_expression_str</span><span class="p">(</span>
                <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span>
            <span class="p">)</span>

            <span class="c1"># If b &gt; 0, generate an expression involving a and (b-1) (note that the expression on the right side must include b-1).</span>
            <span class="n">recursive_variable</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">],</span>
                    <span class="n">recursive_variable</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="n">recursive_expr_1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">while</span> <span class="n">recursive_variable</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">recursive_expr_1</span><span class="p">:</span>
                <span class="n">recursive_expr_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_expression_str</span><span class="p">(</span>
                    <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span>
                <span class="p">)</span>

            <span class="c1"># If b &lt; 0, generate an expression involving a and (b+1).</span>
            <span class="n">recursive_variable</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">],</span>
                    <span class="n">recursive_variable</span><span class="p">,</span>
                <span class="p">]</span>
            <span class="p">)</span>
            <span class="n">recursive_expr_2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">while</span> <span class="n">recursive_variable</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">recursive_expr_2</span><span class="p">:</span>
                <span class="n">recursive_expr_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_expression_str</span><span class="p">(</span>
                    <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expr_base</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> == 0 ; </span><span class="si">{</span><span class="n">recursive_expr_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> &gt; 0 ; </span><span class="si">{</span><span class="n">recursive_expr_2</span><span class="si">}</span><span class="s2">, else&quot;</span>

        <span class="k">elif</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span><span class="p">:</span>
            <span class="c1"># For unary operators, generate a recursive expression with a single parameter.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">]])</span>

            <span class="c1"># If a == 0, randomly generate a number.</span>
            <span class="n">expr_base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_expression_str</span><span class="p">(</span><span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="p">)</span>

            <span class="c1"># If a &gt; 0, generate an expression solely involving (a-1), with its own symbol, and only related to (a-1).</span>
            <span class="k">if</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                <span class="n">recursive_variable</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1)&quot;</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                <span class="n">recursive_variable</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1)</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span> <span class="n">recursive_variable</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">recursive_expr_1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">while</span> <span class="n">recursive_variable</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">recursive_expr_1</span><span class="p">:</span>
                <span class="n">recursive_expr_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_expression_str</span><span class="p">(</span>
                    <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span>
                <span class="p">)</span>

            <span class="c1"># If a &lt; 0, generate an expression solely involving (a+1), with its own symbol, and only related to (a+1).</span>
            <span class="k">if</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                <span class="n">recursive_variable</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1)&quot;</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                <span class="n">recursive_variable</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1)</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span> <span class="n">recursive_variable</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">recursive_expr_2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">while</span> <span class="n">recursive_variable</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">recursive_expr_2</span><span class="p">:</span>
                <span class="n">recursive_expr_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_expression_str</span><span class="p">(</span>
                    <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expr_base</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> == 0 ; </span><span class="si">{</span><span class="n">recursive_expr_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> &gt; 0 ; </span><span class="si">{</span><span class="n">recursive_expr_2</span><span class="si">}</span><span class="s2">, else&quot;</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Unsupported operator type. Only &#39;unary&#39; and &#39;binary&#39; are supported.&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">,</span> <span class="n">choice</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a complete operator definition rule based on the provided parameters.</span>

<span class="sd">        This method constructs the definition of an operator, which can vary depending on the</span>
<span class="sd">        `choice` parameter. It can generate a simple expression, a recursive call, or a branching</span>
<span class="sd">        expression with conditional logic.</span>

<span class="sd">        The definition can be generated in three different forms:</span>
<span class="sd">            1. **Simple Definition**: A basic operator definition without any conditional branching.</span>
<span class="sd">            2. **Recursive Definition**: A definition where the operator is recursively applied, based on the operator type (unary or binary).</span>
<span class="sd">            3. **Branch Definition**: A definition with multiple branches, using conditional logic (if-else statements) to determine the behavior.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            op_symbol (str): The symbol representing the operator (e.g., &#39;+&#39;, &#39;-&#39;, &#39;*&#39;, etc.).</span>
<span class="sd">            op_type (str): The type of the operator, either &#39;unary&#39; (one operand) or &#39;binary&#39; (two operands).</span>
<span class="sd">            op_position (str): The position of the unary operator, either &#39;prefix&#39; or &#39;postfix&#39;.</span>
<span class="sd">            choice (str): A string that determines the type of operator definition to generate:</span>
<span class="sd">                        - &quot;simple_definition&quot;: generates a simple expression without branching.</span>
<span class="sd">                        - &quot;recursive_definition&quot;: generates an expression with a recursive call.</span>
<span class="sd">                        - &quot;branch_definition&quot;: generates an expression with branching logic (if-else).</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: A string representing the operator definition. The content of the string depends on the `choice` parameter:</span>
<span class="sd">                - For &quot;simple_definition&quot;, a simple expression is returned.</span>
<span class="sd">                - For &quot;recursive_definition&quot;, a recursive call expression is returned.</span>
<span class="sd">                - For &quot;branch_definition&quot;, an expression with conditional branches is returned.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the `choice` parameter is not one of the recognized options (&quot;simple_definition&quot;, &quot;recursive_definition&quot;, &quot;branch_definition&quot;).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Generating definition for operator: </span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">, Type: </span><span class="si">{</span><span class="n">op_type</span><span class="si">}</span><span class="s2">, Position: </span><span class="si">{</span><span class="n">op_position</span><span class="si">}</span><span class="s2">, Choice: </span><span class="si">{</span><span class="n">choice</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Generate the left-hand side of the operator definition</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_lhs</span><span class="p">(</span><span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="s2">&quot;simple_definition&quot;</span><span class="p">:</span>
            <span class="c1"># Simple expression, no branches</span>
            <span class="c1"># expr = self.expr_generator.create_expression_str(</span>
            <span class="c1">#     max_depth=random.randint(1, self.expr_generator.max_depth),</span>
            <span class="c1">#     atom_choice=&quot;variable_and_number&quot;,</span>
            <span class="c1"># )</span>
            <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_n_expression_str_with_order</span><span class="p">(</span>
                <span class="n">max_depth</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">max_depth</span><span class="p">),</span>
                <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span><span class="p">,</span>
                <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
                <span class="n">branch_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Simple definition generated: </span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;equal&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span><span class="s2"> </span><span class="si">{</span><span class="n">expr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="se">}}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;equal&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span><span class="s2"> </span><span class="si">{</span><span class="n">expr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="se">}}</span><span class="s2">&quot;</span>

        <span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="s2">&quot;recursive_definition&quot;</span><span class="p">:</span>
            <span class="n">recursive_call</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_recursive_call</span><span class="p">(</span>
                <span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="s2"> </span><span class="si">{</span><span class="n">recursive_call</span><span class="si">}</span><span class="s2"> </span><span class="se">}}</span><span class="s2">&quot;</span>

        <span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="s2">&quot;branch_definition&quot;</span><span class="p">:</span>
            <span class="c1"># Generate branches with conditions</span>
            <span class="n">branches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_branches</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>

            <span class="c1"># Build the branch strings</span>
            <span class="n">branch_strings</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">expr</span><span class="p">,</span> <span class="n">condition</span> <span class="ow">in</span> <span class="n">branches</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">condition</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;if&quot;</span><span class="p">):</span>
                    <span class="n">branch_strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s2"> , </span><span class="si">{</span><span class="n">condition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">condition</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span>
                    <span class="n">branch_strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s2">, else&quot;</span><span class="p">)</span>

            <span class="c1"># Join branches with semicolons</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="s2">&quot; ; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">branch_strings</span><span class="p">)</span>
            <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;equal&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span><span class="s2"> </span><span class="si">{</span><span class="n">rhs</span><span class="si">}</span><span class="s2"> </span><span class="se">}}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Branch definition generated: </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">definition</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown choice: </span><span class="si">{</span><span class="n">choice</span><span class="si">}</span><span class="s2">. Returning None.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">generate_operator_data_by_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choice</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates operator data based on a specified operator definition type.</span>

<span class="sd">        This method generates an operator symbol, determines its type (unary or binary), and sets</span>
<span class="sd">        its position (prefix or postfix). Then, it creates an operator definition based on the given</span>
<span class="sd">        `choice` parameter, which determines whether the operator definition is simple or involves</span>
<span class="sd">        conditional branching. The generated operator data includes the operator&#39;s symbol, type,</span>
<span class="sd">        position, and its corresponding definition.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            choice (str): The type of operator definition to generate.</span>
<span class="sd">                        Can be one of the following:</span>
<span class="sd">                        - &quot;simple_definition&quot;: Generates a basic operator expression without branching.</span>
<span class="sd">                        - &quot;branch_definition&quot;: Generates an operator definition with conditional branching (if-else).</span>
<span class="sd">                        - &quot;recursive_definition&quot;: generates an expression with a recursive call.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary containing the generated operator data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Generating operator data by definition with choice: </span><span class="si">{</span><span class="n">choice</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Generate a random operator symbol that doesn&#39;t already exist in the operator manager</span>
        <span class="n">existing_symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span><span class="o">.</span><span class="n">get_operator_symbols</span><span class="p">()</span>
        <span class="n">op_symbol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_operator</span><span class="p">(</span><span class="n">existing_symbols</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated operator symbol: </span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Determine the type (unary or binary) and position (prefix or postfix) of the operator</span>
        <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_operator_type_and_position</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operator type: </span><span class="si">{</span><span class="n">op_type</span><span class="si">}</span><span class="s2">, Operator position: </span><span class="si">{</span><span class="n">op_position</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Choose the appropriate variables based on the operator type</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unary_variables</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">binary_variables</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">condition_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operator variables set to: </span><span class="si">{</span><span class="n">variables</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Generate the operator definition based on the choice (simple or branch definition)</span>
        <span class="n">definition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_definition</span><span class="p">(</span><span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">,</span> <span class="n">choice</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated operator definition: </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">func_id</span> <span class="o">=</span> <span class="n">generate</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">alphabet</span><span class="o">=</span><span class="n">alphabet</span><span class="p">)</span>
        <span class="c1"># Construct the operator data dictionary</span>
        <span class="n">operator_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  
            <span class="s2">&quot;func_id&quot;</span><span class="p">:</span> <span class="n">func_id</span><span class="p">,</span>
            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">op_symbol</span><span class="p">,</span>
            <span class="s2">&quot;n_ary&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="mi">1</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="mi">2</span>
            <span class="p">),</span>  <span class="c1"># Unary operators have 1 operand, binary have 2</span>
            <span class="s2">&quot;unary_position&quot;</span><span class="p">:</span> <span class="n">op_position</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;n_order&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;is_base&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Not a base operator for now</span>
            <span class="s2">&quot;definition&quot;</span><span class="p">:</span> <span class="n">definition</span><span class="p">,</span>
            <span class="s2">&quot;definition_type&quot;</span><span class="p">:</span> <span class="n">choice</span><span class="p">,</span>  <span class="c1"># The type of definition generated (simple or branch)</span>
            <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Priority is not assigned for now</span>
            <span class="s2">&quot;associativity_direction&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Not assigned for now</span>
            <span class="s2">&quot;op_compute_func&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Compute function will be defined by the parser</span>
            <span class="s2">&quot;op_count_func&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Count function will be defined by the parser</span>
            <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Properties are not assigned for now</span>
            <span class="s2">&quot;dependencies&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Dependencies are not yet defined</span>
            <span class="s2">&quot;is_temporary&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Indicates that this operator is temporary</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated operator data: </span><span class="si">{</span><span class="n">operator_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">operator_data</span>

    <span class="k">def</span> <span class="nf">get_random_recursive_call_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OperatorInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Selects a random operator that supports recursion from the operator manager.</span>

<span class="sd">        This method filters the operators managed by the `operator_manager` to find those</span>
<span class="sd">        that have recursion enabled (i.e., `is_recursion_enabled` is True). It then selects</span>
<span class="sd">        a random operator from the filtered list and returns the corresponding `OperatorInfo` object.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If no operators are available in the operator manager.</span>
<span class="sd">            ValueError: If no operators with recursion enabled are available.</span>

<span class="sd">        Returns:</span>
<span class="sd">            OperatorInfo: The selected operator&#39;s `OperatorInfo` object, including its ID, symbol, and other properties.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Attempting to get a random recursive call operator.&quot;</span><span class="p">)</span>

        <span class="c1"># Check if there are any operators available in the operator manager</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span><span class="o">.</span><span class="n">operators</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;No operators available in the operator manager.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No operators available.&quot;</span><span class="p">)</span>

        <span class="c1"># Filter operators that have recursion enabled</span>
        <span class="n">recursive_operators</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">operator_id</span><span class="p">,</span> <span class="n">operator_info</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">operator_id</span><span class="p">,</span> <span class="n">operator_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span><span class="o">.</span><span class="n">operators</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">operator_info</span><span class="o">.</span><span class="n">n_order</span><span class="o">==</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span>
        <span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Filtered operators with recursion enabled: </span><span class="si">{</span><span class="n">recursive_operators</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

        <span class="c1"># If no operators with recursion are available, raise an exception</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">recursive_operators</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;No operators with recursion enabled.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No operators with recursion enabled.&quot;</span><span class="p">)</span>

        <span class="c1"># Randomly select one operator from the filtered list</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">operator_info</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">recursive_operators</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Selected operator: </span><span class="si">{</span><span class="n">operator_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Return the `OperatorInfo` instance instead of a tuple</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Random recursive call operator selected: </span><span class="si">{</span><span class="n">operator_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">operator_info</span>  <span class="c1"># Returning an instance of OperatorInfo</span>

    <span class="k">def</span> <span class="nf">generate_recursive_operator_data_by_loop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates recursive operator data, including both unary and binary operators,</span>
<span class="sd">        and defines recursive computation functions for the operators. The recursion</span>
<span class="sd">        involves calling other operators within the defined computation functions.</span>

<span class="sd">        This method constructs recursive operator definitions and the corresponding</span>
<span class="sd">        computation functions for both unary and binary operators based on the</span>
<span class="sd">        random operator type, position, and symbols. It checks recursion validity</span>
<span class="sd">        and ensures that recursion will not lead to infinite loops.</span>

<span class="sd">        The generated operator data includes:</span>
<span class="sd">        - The operator&#39;s symbol</span>
<span class="sd">        - Its type (unary or binary)</span>
<span class="sd">        - A computation function</span>
<span class="sd">        - A count function</span>
<span class="sd">        - A definition for the operator&#39;s behavior</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary containing the operator data, including the operator&#39;s</span>
<span class="sd">                  symbol, definition, and computation functions.</span>
<span class="sd">            None: If the recursion validity check fails, returns None.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Fetching existing operator symbols to avoid duplication.&quot;</span><span class="p">)</span>
        <span class="n">existing_symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span><span class="o">.</span><span class="n">get_operator_symbols</span><span class="p">()</span>

        <span class="c1"># Randomly select a new operator symbol</span>
        <span class="n">op_symbol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_operator</span><span class="p">(</span><span class="n">existing_symbols</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Selected operator symbol: </span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Randomly choose operator type (unary or binary) and position</span>
        <span class="c1"># op_type, op_position = self.random_operator_type_and_position()</span>
        <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span> <span class="o">=</span> <span class="s2">&quot;binary&quot;</span><span class="p">,</span> <span class="kc">None</span>
        <span class="c1"># Set the variables for condition and expression generators</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unary_variables</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">binary_variables</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">condition_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>

        <span class="c1"># Generate the operator ID</span>
        <span class="n">func_id</span> <span class="o">=</span> <span class="n">generate</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">alphabet</span><span class="o">=</span><span class="n">alphabet</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated operator Func ID: </span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Fetch a random recursive operator to be called in the recursion</span>
        <span class="n">called_operator_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_random_recursive_call_operator</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
        <span class="n">called_id</span> <span class="o">=</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">func_id</span>
        <span class="n">called_symbol</span> <span class="o">=</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">symbol</span>
        <span class="c1"># called_operator_info.is_recursion_enabled=False#设置为不可以被递归调用了</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Chosen operator for recursion: </span><span class="si">{</span><span class="n">called_symbol</span><span class="si">}</span><span class="s2"> (ID: </span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Generate the left-hand side expression</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_lhs</span><span class="p">(</span><span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">)</span>

        <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;    &quot;</span>

        <span class="c1">#Generate a basic expr here to use as the initial value of the result</span>
        <span class="n">choices</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">))]</span>  
        <span class="n">expr_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">choices</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1">#The range of the loop variable is restricted here.</span>
        <span class="k">if</span> <span class="n">order</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">loop_thres</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e6</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">order</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">loop_thres</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e3</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">order</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">loop_thres</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">loop_thres</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">thres</span><span class="p">)</span>

        <span class="c1"># Handle binary operator recursion</span>
        <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;binary&quot;</span><span class="p">:</span>
            <span class="n">loop_variable</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">]])</span>
            <span class="n">thres_check</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; or (abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &gt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">if</span> <span class="n">order</span><span class="o">&gt;=</span><span class="mi">3</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>


            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Generating recursive binary operator.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">n_ary</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="c1"># Randomly select the parameter order for recursion</span>
                <span class="n">param_order</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="s2">&quot;result&quot;</span><span class="p">),</span>
                        <span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">]),</span>
                        <span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">]),</span>
                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span> <span class="s2">&quot;result&quot;</span><span class="p">),</span>
                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">],</span> <span class="s2">&quot;result&quot;</span><span class="p">),</span>
                    <span class="p">]</span>
                <span class="p">)</span>
                <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span> <span class="o">=</span> <span class="n">param_order</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Selected parameter order for recursion: </span><span class="si">{</span><span class="n">param_order</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

                <span class="c1"># # Check recursion validity</span>
                <span class="c1"># if not self.check_and_set_recursion_validity(</span>
                <span class="c1">#     called_operator_info, op_type, param_order</span>
                <span class="c1"># ):</span>
                <span class="c1">#     self.logger.warning(&quot;Recursion validity check failed.&quot;)</span>
                <span class="c1">#     return None</span>

                <span class="c1"># Generate the recursive computation function for binary operator</span>
                <span class="n">op_compute_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a, b):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) or (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return float(&#39;nan&#39;)</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">param2</span><span class="si">}</span><span class="s2">)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return result</span>
<span class="s2">&quot;&quot;&quot;</span>


                <span class="n">op_count_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_count_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a, b):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) or (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return 1</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">count = 0 </span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">param2</span><span class="si">}</span><span class="s2">)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">count += op_count_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">param2</span><span class="si">}</span><span class="s2">)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return count if count &gt; 0 else 1</span>
<span class="s2">&quot;&quot;&quot;</span>
                <span class="k">if</span> <span class="n">loop_variable</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]:</span>
                    <span class="n">variable_a_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">variable_a_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">variable_b_str_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span>
                    <span class="n">variable_b_str_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">variable_a_str_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span>
                    <span class="n">variable_a_str_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span>
                    <span class="n">variable_b_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">variable_b_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="c1"># Generate the right-hand side expressions for the recursive function</span>
                <span class="k">if</span> <span class="n">param1</span> <span class="o">==</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span>
                    <span class="n">param1_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable_a_str_1</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="n">variable_b_str_1</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">param1_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable_a_str_2</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="n">variable_b_str_2</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">param1_str_1</span> <span class="o">=</span> <span class="n">param1</span>
                    <span class="n">param1_str_2</span> <span class="o">=</span> <span class="n">param1</span>

                <span class="k">if</span> <span class="n">param2</span> <span class="o">==</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span>
                    <span class="n">param2_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable_a_str_1</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="n">variable_b_str_1</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">param2_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable_a_str_2</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="n">variable_b_str_2</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">param2_str_1</span> <span class="o">=</span> <span class="n">param2</span>
                    <span class="n">param2_str_2</span> <span class="o">=</span> <span class="n">param2</span>

                <span class="n">rhs_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param1_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param2_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">rhs_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param1_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param2_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="n">order</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &lt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;nan&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Binary operator definition generated: </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">n_ary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># # Check recursion validity for unary call within binary operator</span>
                <span class="c1"># if not self.check_and_set_recursion_validity(</span>
                <span class="c1">#     called_operator_info, op_type, None</span>
                <span class="c1"># ):</span>
                <span class="c1">#     self.logger.warning(&quot;Recursion validity check failed.&quot;)</span>
                <span class="c1">#     return None</span>

                <span class="n">op_compute_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a, b):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) or (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return float(&#39;nan&#39;)</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(result)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return result</span>
<span class="s2">&quot;&quot;&quot;</span>

                <span class="n">op_count_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_count_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a, b):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) or (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return 1</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">count = 0 </span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(result)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">count += op_count_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(result)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return count if count &gt; 0 else 1</span>
<span class="s2">&quot;&quot;&quot;</span>

                <span class="k">if</span> <span class="n">loop_variable</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]:</span>
                    <span class="n">variable_a_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">variable_a_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">variable_b_str_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span>
                    <span class="n">variable_b_str_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">variable_a_str_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span>
                    <span class="n">variable_a_str_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span>
                    <span class="n">variable_b_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">variable_b_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="n">param_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable_a_str_1</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="n">variable_b_str_1</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">param_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable_a_str_2</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="n">variable_b_str_2</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">unary_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                    <span class="n">rhs_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">rhs_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">elif</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">unary_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                    <span class="n">rhs_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">rhs_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="n">order</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &lt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;nan&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Unary operator within binary operator definition generated: </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Handle unary operator recursion</span>
        <span class="k">elif</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span><span class="p">:</span>
            <span class="n">loop_variable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">]</span>
            <span class="n">thres_check</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; or (abs(a) &gt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">if</span> <span class="n">order</span><span class="o">&gt;=</span><span class="mi">3</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Generating recursive unary operator.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">n_ary</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">param_order</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="s2">&quot;result&quot;</span><span class="p">),</span>
                        <span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">]),</span>
                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span> <span class="s2">&quot;result&quot;</span><span class="p">),</span>
                    <span class="p">]</span>
                <span class="p">)</span>
                <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span> <span class="o">=</span> <span class="n">param_order</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Selected parameter order for recursion: </span><span class="si">{</span><span class="n">param_order</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

                <span class="c1"># if not self.check_and_set_recursion_validity(</span>
                <span class="c1">#     called_operator_info, op_type, param_order</span>
                <span class="c1"># ):</span>
                <span class="c1">#     self.logger.warning(&quot;Recursion validity check failed.&quot;)</span>
                <span class="c1">#     return None</span>

                <span class="n">op_compute_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (a != a) or (a in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return float(&#39;nan&#39;)</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(a)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">param2</span><span class="si">}</span><span class="s2">)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if a &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return result</span>
<span class="s2">&quot;&quot;&quot;</span>

                <span class="n">op_count_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_count_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (a != a) or (a in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return 1</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">count = 0 </span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(a)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">param2</span><span class="si">}</span><span class="s2">)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">count += op_count_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">param2</span><span class="si">}</span><span class="s2">)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if a &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return count if count &gt; 0 else 1</span>
<span class="s2">&quot;&quot;&quot;</span>


                <span class="k">if</span> <span class="n">param1</span> <span class="o">==</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                        <span class="n">param1_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="n">param1_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">elif</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                        <span class="n">param1_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="n">param1_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">param1_str_1</span> <span class="o">=</span> <span class="n">param1</span>
                    <span class="n">param1_str_2</span> <span class="o">=</span> <span class="n">param1</span>

                <span class="k">if</span> <span class="n">param2</span> <span class="o">==</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                        <span class="n">param2_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="n">param2_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">elif</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                        <span class="n">param2_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="n">param2_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">param2_str_1</span> <span class="o">=</span> <span class="n">param1</span>
                    <span class="n">param2_str_2</span> <span class="o">=</span> <span class="n">param1</span>

                <span class="n">rhs_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param1_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param2_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">rhs_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param1_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param2_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="n">order</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &lt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;nan&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Unary operator recursive definition generated: </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="k">elif</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">n_ary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># Check recursion validity for unary operator</span>
                <span class="c1"># if not self.check_and_set_recursion_validity(</span>
                <span class="c1">#     called_operator_info, op_type, None</span>
                <span class="c1"># ):</span>
                <span class="c1">#     self.logger.warning(&quot;Recursion validity check failed.&quot;)</span>
                <span class="c1">#     return None</span>

                <span class="n">op_compute_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (a != a) or (a in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return float(&#39;nan&#39;)</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(a)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(result)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if a &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return result</span>
<span class="s2">&quot;&quot;&quot;</span>

                <span class="n">op_count_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_count_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (a != a) or (a in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return 1</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">count = 0 </span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(a)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(result)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">count += op_count_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(result)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if a &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return count if count &gt; 0 else 1</span>
<span class="s2">&quot;&quot;&quot;</span>

                <span class="k">if</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                    <span class="n">param_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">param_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">elif</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                    <span class="n">param_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">param_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">unary_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                    <span class="n">rhs_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">rhs_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">elif</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">unary_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                    <span class="n">rhs_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">rhs_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="n">order</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &lt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;nan&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unary operator definition generated: </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Unsupported operator type. Only &#39;unary&#39; and &#39;binary&#39; are supported.&quot;</span>
            <span class="p">)</span>

        <span class="n">operator_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Unique identifier for the operator.</span>
            <span class="s2">&quot;func_id&quot;</span><span class="p">:</span> <span class="n">func_id</span><span class="p">,</span>
            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">op_symbol</span><span class="p">,</span>  <span class="c1"># The symbol representing the operator (e.g., &quot;+&quot;, &quot;-&quot;, &quot;*&quot;).</span>
            <span class="s2">&quot;n_ary&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="mi">1</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="mi">2</span>
            <span class="p">),</span>  <span class="c1"># Arity of the operator (1 for unary, 2 for binary).</span>
            <span class="s2">&quot;unary_position&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="n">op_position</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="p">),</span>  <span class="c1"># Position of the unary operator, None for binary.</span>
            <span class="s2">&quot;n_order&quot;</span><span class="p">:</span> <span class="n">order</span><span class="p">,</span>  <span class="c1"># Computation order, managed by OperatorManager.</span>
            <span class="s2">&quot;is_base&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Initially no base operator flag.</span>
            <span class="s2">&quot;definition&quot;</span><span class="p">:</span> <span class="n">definition</span><span class="p">,</span>  <span class="c1"># Recursive definition of the operator.</span>
            <span class="s2">&quot;definition_type&quot;</span><span class="p">:</span> <span class="s2">&quot;recursive_definition&quot;</span><span class="p">,</span>  <span class="c1"># Type of the definition (&quot;recursive_definition&quot;).</span>
            <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Operator priority, not assigned yet.</span>
            <span class="s2">&quot;associativity_direction&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Operator associativity, not assigned yet.</span>
            <span class="s2">&quot;op_compute_func&quot;</span><span class="p">:</span> <span class="n">op_compute_fun</span><span class="p">,</span>  <span class="c1"># Function to compute the operator.</span>
            <span class="s2">&quot;op_count_func&quot;</span><span class="p">:</span> <span class="n">op_count_fun</span><span class="p">,</span>  <span class="c1"># Function to count operations or recursive calls.</span>
            <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Additional properties of the operator, None initially.</span>
            <span class="s2">&quot;dependencies&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Dependencies of the operator, None initially.</span>
            <span class="s2">&quot;is_temporary&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Flag indicating the operator is temporarily generated.</span>
        <span class="p">}</span>

        <span class="c1"># Log the generated operator data for tracking purposes.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated operator data: </span><span class="si">{</span><span class="n">operator_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">operator_data</span>

    <span class="k">def</span> <span class="nf">create_operator_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choice</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate an OperatorInfo object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="s2">&quot;recursive_definition&quot;</span><span class="p">:</span>
            <span class="n">operator_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_recursive_operator_data_by_loop</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">operator_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_operator_data_by_definition</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">operator_data</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">param_config</span><span class="p">,</span> <span class="n">logger</span><span class="p">,</span> <span class="n">condition_generator</span><span class="p">,</span> <span class="n">expr_generator</span><span class="p">,</span> <span class="n">operator_manager</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Initialize the OperatorGenerator.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>param_config</code>
            </td>
            <td>
                  <code><span title="config.ParamConfig">ParamConfig</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration object containing parameters like symbols and operator details.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>logger</code>
            </td>
            <td>
                  <code><span title="config.LogConfig">LogConfig</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Logger configuration to handle logging functionality.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>condition_generator</code>
            </td>
            <td>
                  <code><span title="operatorplus.condition_generator.ConditionGenerator">ConditionGenerator</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A generator responsible for producing conditions.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>expr_generator</code>
            </td>
            <td>
                  <code><span title="expression.expression_generator.ExpressionGenerator">ExpressionGenerator</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A generator responsible for producing expressions.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>operator_manager</code>
            </td>
            <td>
                  <code><span title="operatorplus.operator_manager.OperatorManager">OperatorManager</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Manages operator-related functionality.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.param_config">param_config</span></code></td>
            <td>
                  <code><span title="config.ParamConfig">ParamConfig</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration object that holds various parameters.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.logger">logger</span></code></td>
            <td>
                  <code>Logger</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Logger instance used for logging debug and info messages.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.standard_symbols">standard_symbols</span></code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of standard operator symbols.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.unicode_symbols">unicode_symbols</span></code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of Unicode operator symbols.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.valid_symbols">valid_symbols</span></code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A combined list of valid operator symbols (standard + Unicode).</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.condition_generator">condition_generator</span></code></td>
            <td>
                  <code><span title="operatorplus.condition_generator.ConditionGenerator">ConditionGenerator</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The generator used to generate conditions.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.expr_generator">expr_generator</span></code></td>
            <td>
                  <code><span title="expression.expression_generator.ExpressionGenerator">ExpressionGenerator</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The generator used to generate expressions.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.operator_manager">operator_manager</span></code></td>
            <td>
                  <code><span title="operatorplus.operator_manager.OperatorManager">OperatorManager</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Manages operators for the generator.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.unary_variables">unary_variables</span></code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of variables used in unary operations.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.binary_variables">binary_variables</span></code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of variables used in binary operations.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.max_base">max_base</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum base value used in the generation process.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.operator_symbol_min_len">operator_symbol_min_len</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum length for operator symbols.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.operator_symbol_max_len">operator_symbol_max_len</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum length for operator symbols.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="opulse.operatorplus.operator_generator.OperatorGenerator.__init__.max_if_branches">max_if_branches</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum number of branches in conditional expressions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">param_config</span><span class="p">:</span> <span class="n">ParamConfig</span><span class="p">,</span>
    <span class="n">logger</span><span class="p">:</span> <span class="n">LogConfig</span><span class="p">,</span>
    <span class="n">condition_generator</span><span class="p">:</span> <span class="n">ConditionGenerator</span><span class="p">,</span>
    <span class="n">expr_generator</span><span class="p">:</span> <span class="n">ExpressionGenerator</span><span class="p">,</span>
    <span class="n">operator_manager</span><span class="p">:</span> <span class="n">OperatorManager</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the OperatorGenerator.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        param_config (ParamConfig): Configuration object containing parameters like symbols and operator details.</span>
<span class="sd">        logger (LogConfig): Logger configuration to handle logging functionality.</span>
<span class="sd">        condition_generator (ConditionGenerator): A generator responsible for producing conditions.</span>
<span class="sd">        expr_generator (ExpressionGenerator): A generator responsible for producing expressions.</span>
<span class="sd">        operator_manager (OperatorManager): Manages operator-related functionality.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        param_config (ParamConfig): Configuration object that holds various parameters.</span>
<span class="sd">        logger (Logger): Logger instance used for logging debug and info messages.</span>
<span class="sd">        standard_symbols (list): A list of standard operator symbols.</span>
<span class="sd">        unicode_symbols (list): A list of Unicode operator symbols.</span>
<span class="sd">        valid_symbols (list): A combined list of valid operator symbols (standard + Unicode).</span>
<span class="sd">        condition_generator (ConditionGenerator): The generator used to generate conditions.</span>
<span class="sd">        expr_generator (ExpressionGenerator): The generator used to generate expressions.</span>
<span class="sd">        operator_manager (OperatorManager): Manages operators for the generator.</span>
<span class="sd">        unary_variables (list): List of variables used in unary operations.</span>
<span class="sd">        binary_variables (list): List of variables used in binary operations.</span>
<span class="sd">        max_base (int): Maximum base value used in the generation process.</span>
<span class="sd">        operator_symbol_min_len (int): Minimum length for operator symbols.</span>
<span class="sd">        operator_symbol_max_len (int): Maximum length for operator symbols.</span>
<span class="sd">        max_if_branches (int): Maximum number of branches in conditional expressions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span> <span class="o">=</span> <span class="n">param_config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">get_logger</span><span class="p">()</span>  <span class="c1"># Get logger instance for logging</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">standard_symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;basic_operator_symbols&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unicode_symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_unicode_symbols</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valid_symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">standard_symbols</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">unicode_symbols</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">condition_generator</span> <span class="o">=</span> <span class="n">condition_generator</span>  <span class="c1"># Condition generator instance</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span> <span class="o">=</span> <span class="n">expr_generator</span>  <span class="c1"># Expression generator instance</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span> <span class="o">=</span> <span class="n">operator_manager</span>  <span class="c1"># Operator manager instance</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unary_variables</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">]]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">binary_variables</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">],</span>
    <span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_base&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">operator_symbol_min_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;operator_symbol_min_len&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">operator_symbol_max_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;operator_symbol_max_len&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_if_branches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_if_branches&quot;</span><span class="p">)</span>

    <span class="c1"># self.expr_parser = expr_parser</span>
    <span class="c1"># self.expr_transformer = expr_transformer</span>
    <span class="c1"># Log initialization details</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;OperatorGenerator initialized with the following configuration:&quot;</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Standard symbols: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">standard_symbols</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unicode symbols: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">unicode_symbols</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Valid symbols: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">valid_symbols</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unary variables: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">unary_variables</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Binary variables: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">binary_variables</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Max base: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_base</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operator symbol min length: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">operator_symbol_min_len</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operator symbol max length: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">operator_symbol_max_len</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Max if branches: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">max_if_branches</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.create_operator_info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">create_operator_info</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generate an OperatorInfo object.</p>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">create_operator_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choice</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">order</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate an OperatorInfo object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="s2">&quot;recursive_definition&quot;</span><span class="p">:</span>
        <span class="n">operator_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_recursive_operator_data_by_loop</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">operator_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_operator_data_by_definition</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">operator_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.generate_base_operators" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_base_operators</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generates unary prefix operators for each base from 2 to self.max_base.</p>
<p>This method creates a unary prefix operator for each base in the range from 2 to <code>self.max_base</code>.
For each base, a random operator symbol is generated, and the operator is added to the operator manager.
The operator is stored with additional properties, such as its base number and the unary position.</p>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_base_operators</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates unary prefix operators for each base from 2 to self.max_base.</span>

<span class="sd">    This method creates a unary prefix operator for each base in the range from 2 to `self.max_base`.</span>
<span class="sd">    For each base, a random operator symbol is generated, and the operator is added to the operator manager.</span>
<span class="sd">    The operator is stored with additional properties, such as its base number and the unary position.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;Starting to generate base operators for each base from 2 to max_base.&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Iterate through the range of bases from 2 to max_base</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_base</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating operator for base </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

        <span class="c1"># Get existing operator symbols to avoid duplication</span>
        <span class="n">existing_symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span><span class="o">.</span><span class="n">get_operator_symbols</span><span class="p">()</span>

        <span class="c1"># Generate a random operator symbol that isn&#39;t already used</span>
        <span class="n">op_symbol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_operator</span><span class="p">(</span><span class="n">existing_symbols</span><span class="p">)</span>

        <span class="c1"># Define operator type and position</span>
        <span class="n">op_type</span> <span class="o">=</span> <span class="s2">&quot;unary&quot;</span>
        <span class="n">op_position</span> <span class="o">=</span> <span class="s2">&quot;prefix&quot;</span>
        <span class="n">func_id</span> <span class="o">=</span> <span class="n">generate</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">alphabet</span><span class="o">=</span><span class="n">alphabet</span><span class="p">)</span>
        <span class="c1"># Construct the operator data</span>
        <span class="n">operator_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;func_id&quot;</span><span class="p">:</span>  <span class="n">func_id</span><span class="p">,</span>
            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">op_symbol</span><span class="p">,</span>
            <span class="s2">&quot;n_ary&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>  <span class="c1"># Unary operator</span>
            <span class="s2">&quot;unary_position&quot;</span><span class="p">:</span> <span class="n">op_position</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;n_order&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;is_base&quot;</span><span class="p">:</span> <span class="n">n</span><span class="p">,</span>  <span class="c1"># Base number</span>
            <span class="s2">&quot;definition&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;definition_type&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;associativity_direction&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;op_compute_func&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;op_count_func&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;dependencies&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;is_temporary&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">new_base_operator</span> <span class="o">=</span> <span class="n">OperatorInfo</span><span class="p">(</span><span class="o">**</span><span class="n">operator_data</span><span class="p">)</span>

        <span class="c1"># Add the generated operator to the operator manager</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span><span class="o">.</span><span class="n">add_operator</span><span class="p">(</span><span class="n">new_base_operator</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Base operator for base </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2"> with symbol &#39;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&#39; added successfully.&quot;</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Base operator generation completed.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.generate_branches" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_branches</span><span class="p">(</span><span class="n">order</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generates a list of conditional branches for an expression, including 'if' and 'else' branches.</p>
<p>This method generates a random number of 'if' branches based on the maximum allowed number
of branches (<code>max_if_branches</code>), each containing a randomly generated expression and a condition.
Additionally, an 'else' branch is added with a randomly generated expression.</p>
<p>The format of each branch is a tuple containing the expression and the corresponding condition.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of tuples, each containing a generated expression and its associated condition.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Each tuple is in the form (expression, condition).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_branches</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a list of conditional branches for an expression, including &#39;if&#39; and &#39;else&#39; branches.</span>

<span class="sd">    This method generates a random number of &#39;if&#39; branches based on the maximum allowed number</span>
<span class="sd">    of branches (`max_if_branches`), each containing a randomly generated expression and a condition.</span>
<span class="sd">    Additionally, an &#39;else&#39; branch is added with a randomly generated expression.</span>

<span class="sd">    The format of each branch is a tuple containing the expression and the corresponding condition.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of tuples, each containing a generated expression and its associated condition.</span>
<span class="sd">        Each tuple is in the form (expression, condition).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Generating branches for conditional expressions.&quot;</span><span class="p">)</span>

    <span class="n">num_if_branches</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_if_branches</span><span class="p">)</span>
    <span class="n">branches</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating </span><span class="si">{</span><span class="n">num_if_branches</span><span class="si">}</span><span class="s2"> &#39;if&#39; branches.&quot;</span><span class="p">)</span>


    <span class="n">exprs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_n_expression_str_with_order</span><span class="p">(</span>
            <span class="n">max_depth</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">max_depth</span><span class="p">),</span>
            <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span><span class="p">,</span>
            <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
            <span class="n">branch_num</span><span class="o">=</span><span class="n">num_if_branches</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">expr</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">exprs</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>  
        <span class="n">condition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">condition_generator</span><span class="o">.</span><span class="n">generate_condition_expr</span><span class="p">()</span>
        <span class="n">branches</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;if </span><span class="si">{</span><span class="n">condition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated &#39;if&#39; branch </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s2"> with condition </span><span class="si">{</span><span class="n">condition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">last_expr</span> <span class="o">=</span> <span class="n">exprs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  
    <span class="n">branches</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">last_expr</span><span class="p">,</span> <span class="s2">&quot;else&quot;</span><span class="p">))</span>  
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated &#39;else&#39; branch: </span><span class="si">{</span><span class="n">last_expr</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total branches generated: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">branches</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">branches</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.generate_definition" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_definition</span><span class="p">(</span><span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">,</span> <span class="n">choice</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generates a complete operator definition rule based on the provided parameters.</p>
<p>This method constructs the definition of an operator, which can vary depending on the
<code>choice</code> parameter. It can generate a simple expression, a recursive call, or a branching
expression with conditional logic.</p>


<details class="the-definition-can-be-generated-in-three-different-forms" open>
  <summary>The definition can be generated in three different forms</summary>
  <ol>
<li><strong>Simple Definition</strong>: A basic operator definition without any conditional branching.</li>
<li><strong>Recursive Definition</strong>: A definition where the operator is recursively applied, based on the operator type (unary or binary).</li>
<li><strong>Branch Definition</strong>: A definition with multiple branches, using conditional logic (if-else statements) to determine the behavior.</li>
</ol>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>op_symbol</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The symbol representing the operator (e.g., '+', '-', '*', etc.).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>op_type</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of the operator, either 'unary' (one operand) or 'binary' (two operands).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>op_position</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the unary operator, either 'prefix' or 'postfix'.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>choice</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string that determines the type of operator definition to generate:
        - "simple_definition": generates a simple expression without branching.
        - "recursive_definition": generates an expression with a recursive call.
        - "branch_definition": generates an expression with branching logic (if-else).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A string representing the operator definition. The content of the string depends on the <code>choice</code> parameter:
- For "simple_definition", a simple expression is returned.
- For "recursive_definition", a recursive call expression is returned.
- For "branch_definition", an expression with conditional branches is returned.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the <code>choice</code> parameter is not one of the recognized options ("simple_definition", "recursive_definition", "branch_definition").</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">,</span> <span class="n">choice</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a complete operator definition rule based on the provided parameters.</span>

<span class="sd">    This method constructs the definition of an operator, which can vary depending on the</span>
<span class="sd">    `choice` parameter. It can generate a simple expression, a recursive call, or a branching</span>
<span class="sd">    expression with conditional logic.</span>

<span class="sd">    The definition can be generated in three different forms:</span>
<span class="sd">        1. **Simple Definition**: A basic operator definition without any conditional branching.</span>
<span class="sd">        2. **Recursive Definition**: A definition where the operator is recursively applied, based on the operator type (unary or binary).</span>
<span class="sd">        3. **Branch Definition**: A definition with multiple branches, using conditional logic (if-else statements) to determine the behavior.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        op_symbol (str): The symbol representing the operator (e.g., &#39;+&#39;, &#39;-&#39;, &#39;*&#39;, etc.).</span>
<span class="sd">        op_type (str): The type of the operator, either &#39;unary&#39; (one operand) or &#39;binary&#39; (two operands).</span>
<span class="sd">        op_position (str): The position of the unary operator, either &#39;prefix&#39; or &#39;postfix&#39;.</span>
<span class="sd">        choice (str): A string that determines the type of operator definition to generate:</span>
<span class="sd">                    - &quot;simple_definition&quot;: generates a simple expression without branching.</span>
<span class="sd">                    - &quot;recursive_definition&quot;: generates an expression with a recursive call.</span>
<span class="sd">                    - &quot;branch_definition&quot;: generates an expression with branching logic (if-else).</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A string representing the operator definition. The content of the string depends on the `choice` parameter:</span>
<span class="sd">            - For &quot;simple_definition&quot;, a simple expression is returned.</span>
<span class="sd">            - For &quot;recursive_definition&quot;, a recursive call expression is returned.</span>
<span class="sd">            - For &quot;branch_definition&quot;, an expression with conditional branches is returned.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the `choice` parameter is not one of the recognized options (&quot;simple_definition&quot;, &quot;recursive_definition&quot;, &quot;branch_definition&quot;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Generating definition for operator: </span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">, Type: </span><span class="si">{</span><span class="n">op_type</span><span class="si">}</span><span class="s2">, Position: </span><span class="si">{</span><span class="n">op_position</span><span class="si">}</span><span class="s2">, Choice: </span><span class="si">{</span><span class="n">choice</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Generate the left-hand side of the operator definition</span>
    <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_lhs</span><span class="p">(</span><span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="s2">&quot;simple_definition&quot;</span><span class="p">:</span>
        <span class="c1"># Simple expression, no branches</span>
        <span class="c1"># expr = self.expr_generator.create_expression_str(</span>
        <span class="c1">#     max_depth=random.randint(1, self.expr_generator.max_depth),</span>
        <span class="c1">#     atom_choice=&quot;variable_and_number&quot;,</span>
        <span class="c1"># )</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_n_expression_str_with_order</span><span class="p">(</span>
            <span class="n">max_depth</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">max_depth</span><span class="p">),</span>
            <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span><span class="p">,</span>
            <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
            <span class="n">branch_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Simple definition generated: </span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;equal&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span><span class="s2"> </span><span class="si">{</span><span class="n">expr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="se">}}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;equal&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span><span class="s2"> </span><span class="si">{</span><span class="n">expr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="se">}}</span><span class="s2">&quot;</span>

    <span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="s2">&quot;recursive_definition&quot;</span><span class="p">:</span>
        <span class="n">recursive_call</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_recursive_call</span><span class="p">(</span>
            <span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="s2"> </span><span class="si">{</span><span class="n">recursive_call</span><span class="si">}</span><span class="s2"> </span><span class="se">}}</span><span class="s2">&quot;</span>

    <span class="k">elif</span> <span class="n">choice</span> <span class="o">==</span> <span class="s2">&quot;branch_definition&quot;</span><span class="p">:</span>
        <span class="c1"># Generate branches with conditions</span>
        <span class="n">branches</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_branches</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>

        <span class="c1"># Build the branch strings</span>
        <span class="n">branch_strings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">expr</span><span class="p">,</span> <span class="n">condition</span> <span class="ow">in</span> <span class="n">branches</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">condition</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;if&quot;</span><span class="p">):</span>
                <span class="n">branch_strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s2"> , </span><span class="si">{</span><span class="n">condition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">condition</span> <span class="o">==</span> <span class="s2">&quot;else&quot;</span><span class="p">:</span>
                <span class="n">branch_strings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s2">, else&quot;</span><span class="p">)</span>

        <span class="c1"># Join branches with semicolons</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="s2">&quot; ; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">branch_strings</span><span class="p">)</span>
        <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;equal&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="se">{{</span><span class="s2"> </span><span class="si">{</span><span class="n">rhs</span><span class="si">}</span><span class="s2"> </span><span class="se">}}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Branch definition generated: </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">definition</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown choice: </span><span class="si">{</span><span class="n">choice</span><span class="si">}</span><span class="s2">. Returning None.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.generate_lhs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_lhs</span><span class="p">(</span><span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generates the left-hand side (LHS) of an expression based on the operator type and position.</p>
<p>This method constructs the left-hand side of an expression depending on the type of operator
(unary or binary) and its position (prefix or postfix). It uses the operator symbol and operands
defined in the configuration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>op_symbol</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The operator symbol to be used in the expression (e.g., "+", "⊕").</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>op_type</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of the operator, either "unary" or "binary".</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>op_position</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position of the operator, either "prefix" or "postfix" (only for unary operators).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The generated left-hand side expression as a string.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the operator type is neither "unary" nor "binary".</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_lhs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">)</span> <span class="o">-&gt;</span><span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates the left-hand side (LHS) of an expression based on the operator type and position.</span>

<span class="sd">    This method constructs the left-hand side of an expression depending on the type of operator</span>
<span class="sd">    (unary or binary) and its position (prefix or postfix). It uses the operator symbol and operands</span>
<span class="sd">    defined in the configuration.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        op_symbol (str): The operator symbol to be used in the expression (e.g., &quot;+&quot;, &quot;⊕&quot;).</span>
<span class="sd">        op_type (str): The type of the operator, either &quot;unary&quot; or &quot;binary&quot;.</span>
<span class="sd">        op_position (str): The position of the operator, either &quot;prefix&quot; or &quot;postfix&quot; (only for unary operators).</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The generated left-hand side expression as a string.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the operator type is neither &quot;unary&quot; nor &quot;binary&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Generating LHS for operator &#39;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&#39;, type &#39;</span><span class="si">{</span><span class="n">op_type</span><span class="si">}</span><span class="s2">&#39;, position &#39;</span><span class="si">{</span><span class="n">op_position</span><span class="si">}</span><span class="s2">&#39;.&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Handle the case for unary operators</span>
    <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
            <span class="n">lhs</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># e.g., &quot;-a&quot;</span>
        <span class="k">elif</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
            <span class="n">lhs</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># e.g., &quot;a-&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid position &#39;</span><span class="si">{</span><span class="n">op_position</span><span class="si">}</span><span class="s2">&#39; for unary operator.&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid position &#39;</span><span class="si">{</span><span class="n">op_position</span><span class="si">}</span><span class="s2">&#39; for unary operator.&quot;</span>
            <span class="p">)</span>

    <span class="c1"># Handle the case for binary operators</span>
    <span class="k">elif</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;binary&quot;</span><span class="p">:</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># e.g., &#39;a + b&#39;, &#39;a⊕b&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid operator type &#39;</span><span class="si">{</span><span class="n">op_type</span><span class="si">}</span><span class="s2">&#39; received.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operator type must be either &#39;unary&#39; or &#39;binary&#39;.&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;LHS generated: </span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lhs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.generate_operator_data_by_definition" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_operator_data_by_definition</span><span class="p">(</span><span class="n">choice</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generates operator data based on a specified operator definition type.</p>
<p>This method generates an operator symbol, determines its type (unary or binary), and sets
its position (prefix or postfix). Then, it creates an operator definition based on the given
<code>choice</code> parameter, which determines whether the operator definition is simple or involves
conditional branching. The generated operator data includes the operator's symbol, type,
position, and its corresponding definition.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>choice</code>
            </td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The type of operator definition to generate.
        Can be one of the following:
        - "simple_definition": Generates a basic operator expression without branching.
        - "branch_definition": Generates an operator definition with conditional branching (if-else).
        - "recursive_definition": generates an expression with a recursive call.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing the generated operator data.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_operator_data_by_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choice</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates operator data based on a specified operator definition type.</span>

<span class="sd">    This method generates an operator symbol, determines its type (unary or binary), and sets</span>
<span class="sd">    its position (prefix or postfix). Then, it creates an operator definition based on the given</span>
<span class="sd">    `choice` parameter, which determines whether the operator definition is simple or involves</span>
<span class="sd">    conditional branching. The generated operator data includes the operator&#39;s symbol, type,</span>
<span class="sd">    position, and its corresponding definition.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        choice (str): The type of operator definition to generate.</span>
<span class="sd">                    Can be one of the following:</span>
<span class="sd">                    - &quot;simple_definition&quot;: Generates a basic operator expression without branching.</span>
<span class="sd">                    - &quot;branch_definition&quot;: Generates an operator definition with conditional branching (if-else).</span>
<span class="sd">                    - &quot;recursive_definition&quot;: generates an expression with a recursive call.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the generated operator data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Generating operator data by definition with choice: </span><span class="si">{</span><span class="n">choice</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Generate a random operator symbol that doesn&#39;t already exist in the operator manager</span>
    <span class="n">existing_symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span><span class="o">.</span><span class="n">get_operator_symbols</span><span class="p">()</span>
    <span class="n">op_symbol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_operator</span><span class="p">(</span><span class="n">existing_symbols</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated operator symbol: </span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Determine the type (unary or binary) and position (prefix or postfix) of the operator</span>
    <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_operator_type_and_position</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operator type: </span><span class="si">{</span><span class="n">op_type</span><span class="si">}</span><span class="s2">, Operator position: </span><span class="si">{</span><span class="n">op_position</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Choose the appropriate variables based on the operator type</span>
    <span class="n">variables</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unary_variables</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">binary_variables</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">condition_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Operator variables set to: </span><span class="si">{</span><span class="n">variables</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Generate the operator definition based on the choice (simple or branch definition)</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_definition</span><span class="p">(</span><span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">,</span> <span class="n">choice</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated operator definition: </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">func_id</span> <span class="o">=</span> <span class="n">generate</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">alphabet</span><span class="o">=</span><span class="n">alphabet</span><span class="p">)</span>
    <span class="c1"># Construct the operator data dictionary</span>
    <span class="n">operator_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  
        <span class="s2">&quot;func_id&quot;</span><span class="p">:</span> <span class="n">func_id</span><span class="p">,</span>
        <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">op_symbol</span><span class="p">,</span>
        <span class="s2">&quot;n_ary&quot;</span><span class="p">:</span> <span class="p">(</span>
            <span class="mi">1</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="mi">2</span>
        <span class="p">),</span>  <span class="c1"># Unary operators have 1 operand, binary have 2</span>
        <span class="s2">&quot;unary_position&quot;</span><span class="p">:</span> <span class="n">op_position</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;n_order&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s2">&quot;is_base&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Not a base operator for now</span>
        <span class="s2">&quot;definition&quot;</span><span class="p">:</span> <span class="n">definition</span><span class="p">,</span>
        <span class="s2">&quot;definition_type&quot;</span><span class="p">:</span> <span class="n">choice</span><span class="p">,</span>  <span class="c1"># The type of definition generated (simple or branch)</span>
        <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Priority is not assigned for now</span>
        <span class="s2">&quot;associativity_direction&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Not assigned for now</span>
        <span class="s2">&quot;op_compute_func&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Compute function will be defined by the parser</span>
        <span class="s2">&quot;op_count_func&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Count function will be defined by the parser</span>
        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Properties are not assigned for now</span>
        <span class="s2">&quot;dependencies&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Dependencies are not yet defined</span>
        <span class="s2">&quot;is_temporary&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Indicates that this operator is temporary</span>
    <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated operator data: </span><span class="si">{</span><span class="n">operator_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">operator_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.generate_recursive_call" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_recursive_call</span><span class="p">(</span><span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generates recursive expressions for binary and unary operators.</p>
<p>This function creates recursive calls for both unary and binary operators
based on the following rules:</p>


<details class="for-binary-operators" open>
  <summary>For binary operators</summary>
  <ul>
<li>If b == 0, generates a basic expression involving a and b.</li>
<li>If b &gt; 0, generates an expression involving a and (b-1), where the expression on the right side must include (b-1).</li>
<li>If b &lt; 0, generates an expression involving a and (b+1), where the expression on the right side must include (b+1).</li>
</ul>
</details>

<details class="for-unary-operators" open>
  <summary>For unary operators</summary>
  <ul>
<li>If a == 0, randomly generates a number.</li>
<li>If a &gt; 0, generates an expression solely involving (a-1), with its own symbol, and only related to (a-1).</li>
<li>If a &lt; 0, generates an expression solely involving (a+1), with its own symbol, and only related to (a+1).</li>
</ul>
</details>        <p>Parameters:
op_symbol (str): The operator symbol (e.g., '+', '-', '*', etc.) to be used in the expressions.
op_type (str): The type of the operator. Can be either 'unary' or 'binary'.
op_position (str): The position of the unary operator. Can be either 'prefix' or 'postfix' (relevant only for unary operators).</p>
<p>Returns:
str: A string representing the recursive expression for the operator, with conditions based on the values of 'a' and 'b'.</p>
<p>Raises:
ValueError: If the provided operator type is neither 'unary' nor 'binary'.</p>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">generate_recursive_call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates recursive expressions for binary and unary operators.</span>

<span class="sd">    This function creates recursive calls for both unary and binary operators</span>
<span class="sd">    based on the following rules:</span>

<span class="sd">    For binary operators:</span>
<span class="sd">        - If b == 0, generates a basic expression involving a and b.</span>
<span class="sd">        - If b &gt; 0, generates an expression involving a and (b-1), where the expression on the right side must include (b-1).</span>
<span class="sd">        - If b &lt; 0, generates an expression involving a and (b+1), where the expression on the right side must include (b+1).</span>

<span class="sd">    For unary operators:</span>
<span class="sd">        - If a == 0, randomly generates a number.</span>
<span class="sd">        - If a &gt; 0, generates an expression solely involving (a-1), with its own symbol, and only related to (a-1).</span>
<span class="sd">        - If a &lt; 0, generates an expression solely involving (a+1), with its own symbol, and only related to (a+1).</span>

<span class="sd">    Parameters:</span>
<span class="sd">    op_symbol (str): The operator symbol (e.g., &#39;+&#39;, &#39;-&#39;, &#39;*&#39;, etc.) to be used in the expressions.</span>
<span class="sd">    op_type (str): The type of the operator. Can be either &#39;unary&#39; or &#39;binary&#39;.</span>
<span class="sd">    op_position (str): The position of the unary operator. Can be either &#39;prefix&#39; or &#39;postfix&#39; (relevant only for unary operators).</span>

<span class="sd">    Returns:</span>
<span class="sd">    str: A string representing the recursive expression for the operator, with conditions based on the values of &#39;a&#39; and &#39;b&#39;.</span>

<span class="sd">    Raises:</span>
<span class="sd">    ValueError: If the provided operator type is neither &#39;unary&#39; nor &#39;binary&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;binary&quot;</span><span class="p">:</span>
        <span class="c1"># The recursive expression for generating binary operators with operands a and b.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">],</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># If b == 0, generate a basic expression with a and b.</span>
        <span class="n">expr_base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_expression_str</span><span class="p">(</span>
            <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span>
        <span class="p">)</span>

        <span class="c1"># If b &gt; 0, generate an expression involving a and (b-1) (note that the expression on the right side must include b-1).</span>
        <span class="n">recursive_variable</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">],</span>
                <span class="n">recursive_variable</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="n">recursive_expr_1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">while</span> <span class="n">recursive_variable</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">recursive_expr_1</span><span class="p">:</span>
            <span class="n">recursive_expr_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_expression_str</span><span class="p">(</span>
                <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span>
            <span class="p">)</span>

        <span class="c1"># If b &lt; 0, generate an expression involving a and (b+1).</span>
        <span class="n">recursive_variable</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">],</span>
                <span class="n">recursive_variable</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="n">recursive_expr_2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">while</span> <span class="n">recursive_variable</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">recursive_expr_2</span><span class="p">:</span>
            <span class="n">recursive_expr_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_expression_str</span><span class="p">(</span>
                <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expr_base</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> == 0 ; </span><span class="si">{</span><span class="n">recursive_expr_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> &gt; 0 ; </span><span class="si">{</span><span class="n">recursive_expr_2</span><span class="si">}</span><span class="s2">, else&quot;</span>

    <span class="k">elif</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span><span class="p">:</span>
        <span class="c1"># For unary operators, generate a recursive expression with a single parameter.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">]])</span>

        <span class="c1"># If a == 0, randomly generate a number.</span>
        <span class="n">expr_base</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_expression_str</span><span class="p">(</span><span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="p">)</span>

        <span class="c1"># If a &gt; 0, generate an expression solely involving (a-1), with its own symbol, and only related to (a-1).</span>
        <span class="k">if</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
            <span class="n">recursive_variable</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1)&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
            <span class="n">recursive_variable</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1)</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span> <span class="n">recursive_variable</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">recursive_expr_1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">while</span> <span class="n">recursive_variable</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">recursive_expr_1</span><span class="p">:</span>
            <span class="n">recursive_expr_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_expression_str</span><span class="p">(</span>
                <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span>
            <span class="p">)</span>

        <span class="c1"># If a &lt; 0, generate an expression solely involving (a+1), with its own symbol, and only related to (a+1).</span>
        <span class="k">if</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
            <span class="n">recursive_variable</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1)&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
            <span class="n">recursive_variable</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1)</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span> <span class="n">recursive_variable</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">recursive_expr_2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">while</span> <span class="n">recursive_variable</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">recursive_expr_2</span><span class="p">:</span>
            <span class="n">recursive_expr_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">create_expression_str</span><span class="p">(</span>
                <span class="n">atom_choice</span><span class="o">=</span><span class="s2">&quot;variable_and_number&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">expr_base</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> == 0 ; </span><span class="si">{</span><span class="n">recursive_expr_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> &gt; 0 ; </span><span class="si">{</span><span class="n">recursive_expr_2</span><span class="si">}</span><span class="s2">, else&quot;</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Unsupported operator type. Only &#39;unary&#39; and &#39;binary&#39; are supported.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.generate_recursive_operator_data_by_loop" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_recursive_operator_data_by_loop</span><span class="p">(</span><span class="n">order</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generates recursive operator data, including both unary and binary operators,
and defines recursive computation functions for the operators. The recursion
involves calling other operators within the defined computation functions.</p>
<p>This method constructs recursive operator definitions and the corresponding
computation functions for both unary and binary operators based on the
random operator type, position, and symbols. It checks recursion validity
and ensures that recursion will not lead to infinite loops.</p>
<p>The generated operator data includes:
- The operator's symbol
- Its type (unary or binary)
- A computation function
- A count function
- A definition for the operator's behavior</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="typing.Optional">Optional</span>[dict]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing the operator data, including the operator's
  symbol, definition, and computation functions.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>None</code></td>            <td>
                  <code><span title="typing.Optional">Optional</span>[dict]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the recursion validity check fails, returns None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="nf">generate_recursive_operator_data_by_loop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates recursive operator data, including both unary and binary operators,</span>
<span class="sd">        and defines recursive computation functions for the operators. The recursion</span>
<span class="sd">        involves calling other operators within the defined computation functions.</span>

<span class="sd">        This method constructs recursive operator definitions and the corresponding</span>
<span class="sd">        computation functions for both unary and binary operators based on the</span>
<span class="sd">        random operator type, position, and symbols. It checks recursion validity</span>
<span class="sd">        and ensures that recursion will not lead to infinite loops.</span>

<span class="sd">        The generated operator data includes:</span>
<span class="sd">        - The operator&#39;s symbol</span>
<span class="sd">        - Its type (unary or binary)</span>
<span class="sd">        - A computation function</span>
<span class="sd">        - A count function</span>
<span class="sd">        - A definition for the operator&#39;s behavior</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary containing the operator data, including the operator&#39;s</span>
<span class="sd">                  symbol, definition, and computation functions.</span>
<span class="sd">            None: If the recursion validity check fails, returns None.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Fetching existing operator symbols to avoid duplication.&quot;</span><span class="p">)</span>
        <span class="n">existing_symbols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span><span class="o">.</span><span class="n">get_operator_symbols</span><span class="p">()</span>

        <span class="c1"># Randomly select a new operator symbol</span>
        <span class="n">op_symbol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_operator</span><span class="p">(</span><span class="n">existing_symbols</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Selected operator symbol: </span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Randomly choose operator type (unary or binary) and position</span>
        <span class="c1"># op_type, op_position = self.random_operator_type_and_position()</span>
        <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span> <span class="o">=</span> <span class="s2">&quot;binary&quot;</span><span class="p">,</span> <span class="kc">None</span>
        <span class="c1"># Set the variables for condition and expression generators</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unary_variables</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">binary_variables</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">condition_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expr_generator</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>

        <span class="c1"># Generate the operator ID</span>
        <span class="n">func_id</span> <span class="o">=</span> <span class="n">generate</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">alphabet</span><span class="o">=</span><span class="n">alphabet</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated operator Func ID: </span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Fetch a random recursive operator to be called in the recursion</span>
        <span class="n">called_operator_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_random_recursive_call_operator</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
        <span class="n">called_id</span> <span class="o">=</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">func_id</span>
        <span class="n">called_symbol</span> <span class="o">=</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">symbol</span>
        <span class="c1"># called_operator_info.is_recursion_enabled=False#设置为不可以被递归调用了</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Chosen operator for recursion: </span><span class="si">{</span><span class="n">called_symbol</span><span class="si">}</span><span class="s2"> (ID: </span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Generate the left-hand side expression</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_lhs</span><span class="p">(</span><span class="n">op_symbol</span><span class="p">,</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">op_position</span><span class="p">)</span>

        <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;    &quot;</span>

        <span class="c1">#Generate a basic expr here to use as the initial value of the result</span>
        <span class="n">choices</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">))]</span>  
        <span class="n">expr_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">choices</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="c1">#The range of the loop variable is restricted here.</span>
        <span class="k">if</span> <span class="n">order</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">loop_thres</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e6</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">order</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">loop_thres</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e3</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">order</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">loop_thres</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mf">1e2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">loop_thres</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">thres</span><span class="p">)</span>

        <span class="c1"># Handle binary operator recursion</span>
        <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;binary&quot;</span><span class="p">:</span>
            <span class="n">loop_variable</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">]])</span>
            <span class="n">thres_check</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; or (abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &gt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">if</span> <span class="n">order</span><span class="o">&gt;=</span><span class="mi">3</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>


            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Generating recursive binary operator.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">n_ary</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="c1"># Randomly select the parameter order for recursion</span>
                <span class="n">param_order</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="s2">&quot;result&quot;</span><span class="p">),</span>
                        <span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">]),</span>
                        <span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">]),</span>
                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span> <span class="s2">&quot;result&quot;</span><span class="p">),</span>
                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;right_operand&quot;</span><span class="p">],</span> <span class="s2">&quot;result&quot;</span><span class="p">),</span>
                    <span class="p">]</span>
                <span class="p">)</span>
                <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span> <span class="o">=</span> <span class="n">param_order</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Selected parameter order for recursion: </span><span class="si">{</span><span class="n">param_order</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

                <span class="c1"># # Check recursion validity</span>
                <span class="c1"># if not self.check_and_set_recursion_validity(</span>
                <span class="c1">#     called_operator_info, op_type, param_order</span>
                <span class="c1"># ):</span>
                <span class="c1">#     self.logger.warning(&quot;Recursion validity check failed.&quot;)</span>
                <span class="c1">#     return None</span>

                <span class="c1"># Generate the recursive computation function for binary operator</span>
                <span class="n">op_compute_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a, b):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) or (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return float(&#39;nan&#39;)</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">param2</span><span class="si">}</span><span class="s2">)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return result</span>
<span class="s2">&quot;&quot;&quot;</span>


                <span class="n">op_count_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_count_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a, b):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) or (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return 1</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">count = 0 </span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">param2</span><span class="si">}</span><span class="s2">)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">count += op_count_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">param2</span><span class="si">}</span><span class="s2">)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return count if count &gt; 0 else 1</span>
<span class="s2">&quot;&quot;&quot;</span>
                <span class="k">if</span> <span class="n">loop_variable</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]:</span>
                    <span class="n">variable_a_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">variable_a_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">variable_b_str_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span>
                    <span class="n">variable_b_str_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">variable_a_str_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span>
                    <span class="n">variable_a_str_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span>
                    <span class="n">variable_b_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">variable_b_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="c1"># Generate the right-hand side expressions for the recursive function</span>
                <span class="k">if</span> <span class="n">param1</span> <span class="o">==</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span>
                    <span class="n">param1_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable_a_str_1</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="n">variable_b_str_1</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">param1_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable_a_str_2</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="n">variable_b_str_2</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">param1_str_1</span> <span class="o">=</span> <span class="n">param1</span>
                    <span class="n">param1_str_2</span> <span class="o">=</span> <span class="n">param1</span>

                <span class="k">if</span> <span class="n">param2</span> <span class="o">==</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span>
                    <span class="n">param2_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable_a_str_1</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="n">variable_b_str_1</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">param2_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable_a_str_2</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="n">variable_b_str_2</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">param2_str_1</span> <span class="o">=</span> <span class="n">param2</span>
                    <span class="n">param2_str_2</span> <span class="o">=</span> <span class="n">param2</span>

                <span class="n">rhs_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param1_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param2_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">rhs_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param1_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param2_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="n">order</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &lt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;nan&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Binary operator definition generated: </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">elif</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">n_ary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># # Check recursion validity for unary call within binary operator</span>
                <span class="c1"># if not self.check_and_set_recursion_validity(</span>
                <span class="c1">#     called_operator_info, op_type, None</span>
                <span class="c1"># ):</span>
                <span class="c1">#     self.logger.warning(&quot;Recursion validity check failed.&quot;)</span>
                <span class="c1">#     return None</span>

                <span class="n">op_compute_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a, b):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) or (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return float(&#39;nan&#39;)</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(result)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return result</span>
<span class="s2">&quot;&quot;&quot;</span>

                <span class="n">op_count_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_count_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a, b):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> != </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) or (</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return 1</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">count = 0 </span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(result)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">count += op_count_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(result)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return count if count &gt; 0 else 1</span>
<span class="s2">&quot;&quot;&quot;</span>

                <span class="k">if</span> <span class="n">loop_variable</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]:</span>
                    <span class="n">variable_a_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">variable_a_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">variable_b_str_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span>
                    <span class="n">variable_b_str_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">variable_a_str_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span>
                    <span class="n">variable_a_str_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span>
                    <span class="n">variable_b_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">variable_b_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="n">param_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable_a_str_1</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="n">variable_b_str_1</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">param_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable_a_str_2</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="n">variable_b_str_2</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">unary_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                    <span class="n">rhs_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">rhs_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">elif</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">unary_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                    <span class="n">rhs_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">rhs_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="n">order</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &lt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;nan&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Unary operator within binary operator definition generated: </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="c1"># Handle unary operator recursion</span>
        <span class="k">elif</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span><span class="p">:</span>
            <span class="n">loop_variable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">]</span>
            <span class="n">thres_check</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; or (abs(a) &gt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">if</span> <span class="n">order</span><span class="o">&gt;=</span><span class="mi">3</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Generating recursive unary operator.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">n_ary</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">param_order</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="s2">&quot;result&quot;</span><span class="p">),</span>
                        <span class="p">(</span><span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">]),</span>
                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s2">&quot;left_operand&quot;</span><span class="p">],</span> <span class="s2">&quot;result&quot;</span><span class="p">),</span>
                    <span class="p">]</span>
                <span class="p">)</span>
                <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span> <span class="o">=</span> <span class="n">param_order</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Selected parameter order for recursion: </span><span class="si">{</span><span class="n">param_order</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

                <span class="c1"># if not self.check_and_set_recursion_validity(</span>
                <span class="c1">#     called_operator_info, op_type, param_order</span>
                <span class="c1"># ):</span>
                <span class="c1">#     self.logger.warning(&quot;Recursion validity check failed.&quot;)</span>
                <span class="c1">#     return None</span>

                <span class="n">op_compute_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (a != a) or (a in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return float(&#39;nan&#39;)</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(a)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">param2</span><span class="si">}</span><span class="s2">)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if a &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return result</span>
<span class="s2">&quot;&quot;&quot;</span>

                <span class="n">op_count_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_count_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (a != a) or (a in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return 1</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">count = 0 </span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(a)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">param2</span><span class="si">}</span><span class="s2">)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">count += op_count_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">param1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">param2</span><span class="si">}</span><span class="s2">)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if a &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return count if count &gt; 0 else 1</span>
<span class="s2">&quot;&quot;&quot;</span>


                <span class="k">if</span> <span class="n">param1</span> <span class="o">==</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                        <span class="n">param1_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="n">param1_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">elif</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                        <span class="n">param1_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="n">param1_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">param1_str_1</span> <span class="o">=</span> <span class="n">param1</span>
                    <span class="n">param1_str_2</span> <span class="o">=</span> <span class="n">param1</span>

                <span class="k">if</span> <span class="n">param2</span> <span class="o">==</span> <span class="s2">&quot;result&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                        <span class="n">param2_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="n">param2_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">elif</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                        <span class="n">param2_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="n">param2_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">param2_str_1</span> <span class="o">=</span> <span class="n">param1</span>
                    <span class="n">param2_str_2</span> <span class="o">=</span> <span class="n">param1</span>

                <span class="n">rhs_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param1_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param2_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">rhs_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param1_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param2_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="n">order</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &lt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;nan&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Unary operator recursive definition generated: </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="k">elif</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">n_ary</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># Check recursion validity for unary operator</span>
                <span class="c1"># if not self.check_and_set_recursion_validity(</span>
                <span class="c1">#     called_operator_info, op_type, None</span>
                <span class="c1"># ):</span>
                <span class="c1">#     self.logger.warning(&quot;Recursion validity check failed.&quot;)</span>
                <span class="c1">#     return None</span>

                <span class="n">op_compute_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (a != a) or (a in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return float(&#39;nan&#39;)</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(a)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(result)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if a &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return result</span>
<span class="s2">&quot;&quot;&quot;</span>

                <span class="n">op_count_fun</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;def op_count_</span><span class="si">{</span><span class="n">func_id</span><span class="si">}</span><span class="s2">(a):</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">special_values = [float(&#39;inf&#39;), float(&#39;-inf&#39;)]</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">if (a != a) or (a in special_values)</span><span class="si">{</span><span class="n">thres_check</span><span class="si">}</span><span class="s2">:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">return 1</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">result = </span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">count = 0 </span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">for _ in range(abs(a)):</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">temp_result = op_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(result)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">count += op_count_</span><span class="si">{</span><span class="n">called_id</span><span class="si">}</span><span class="s2">(result)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">if abs(temp_result) &gt; thres:</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s2">temp_result = float(&quot;inf&quot;)</span>
<span class="si">{</span><span class="n">indent</span><span class="o">*</span><span class="mi">2</span><span class="si">}</span><span class="s2">result = temp_result if a &gt; 0 else -temp_result</span>
<span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">return count if count &gt; 0 else 1</span>
<span class="s2">&quot;&quot;&quot;</span>

                <span class="k">if</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                    <span class="n">param_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">param_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">op_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">elif</span> <span class="n">op_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                    <span class="n">param_str_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">-1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">param_str_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_operand&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">+1</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">op_symbol</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">unary_position</span> <span class="o">==</span> <span class="s2">&quot;prefix&quot;</span><span class="p">:</span>
                    <span class="n">rhs_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">rhs_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">called_symbol</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">elif</span> <span class="n">called_operator_info</span><span class="o">.</span><span class="n">unary_position</span> <span class="o">==</span> <span class="s2">&quot;postfix&quot;</span><span class="p">:</span>
                    <span class="n">rhs_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_1</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">rhs_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;left_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">param_str_2</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;right_parenthesis&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">called_symbol</span><span class="si">}</span><span class="s2">&quot;</span>

                <span class="k">if</span> <span class="n">order</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &lt; 0 and abs(</span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2">) &lt; </span><span class="si">{</span><span class="n">loop_thres</span><span class="si">}</span><span class="s2">; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">param_config</span><span class="o">.</span><span class="n">atoms</span><span class="p">[</span><span class="s1">&#39;nan&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">definition</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lhs</span><span class="si">}</span><span class="s2"> = </span><span class="se">{{</span><span class="si">{</span><span class="n">expr_str</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> == 0; </span><span class="si">{</span><span class="n">rhs_1</span><span class="si">}</span><span class="s2">, if </span><span class="si">{</span><span class="n">loop_variable</span><span class="si">}</span><span class="s2"> &gt; 0; -</span><span class="si">{</span><span class="n">rhs_2</span><span class="si">}</span><span class="s2">, else</span><span class="se">}}</span><span class="s2">&quot;</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unary operator definition generated: </span><span class="si">{</span><span class="n">definition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Unsupported operator type. Only &#39;unary&#39; and &#39;binary&#39; are supported.&quot;</span>
            <span class="p">)</span>

        <span class="n">operator_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Unique identifier for the operator.</span>
            <span class="s2">&quot;func_id&quot;</span><span class="p">:</span> <span class="n">func_id</span><span class="p">,</span>
            <span class="s2">&quot;symbol&quot;</span><span class="p">:</span> <span class="n">op_symbol</span><span class="p">,</span>  <span class="c1"># The symbol representing the operator (e.g., &quot;+&quot;, &quot;-&quot;, &quot;*&quot;).</span>
            <span class="s2">&quot;n_ary&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="mi">1</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="mi">2</span>
            <span class="p">),</span>  <span class="c1"># Arity of the operator (1 for unary, 2 for binary).</span>
            <span class="s2">&quot;unary_position&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="n">op_position</span> <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="p">),</span>  <span class="c1"># Position of the unary operator, None for binary.</span>
            <span class="s2">&quot;n_order&quot;</span><span class="p">:</span> <span class="n">order</span><span class="p">,</span>  <span class="c1"># Computation order, managed by OperatorManager.</span>
            <span class="s2">&quot;is_base&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Initially no base operator flag.</span>
            <span class="s2">&quot;definition&quot;</span><span class="p">:</span> <span class="n">definition</span><span class="p">,</span>  <span class="c1"># Recursive definition of the operator.</span>
            <span class="s2">&quot;definition_type&quot;</span><span class="p">:</span> <span class="s2">&quot;recursive_definition&quot;</span><span class="p">,</span>  <span class="c1"># Type of the definition (&quot;recursive_definition&quot;).</span>
            <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Operator priority, not assigned yet.</span>
            <span class="s2">&quot;associativity_direction&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Operator associativity, not assigned yet.</span>
            <span class="s2">&quot;op_compute_func&quot;</span><span class="p">:</span> <span class="n">op_compute_fun</span><span class="p">,</span>  <span class="c1"># Function to compute the operator.</span>
            <span class="s2">&quot;op_count_func&quot;</span><span class="p">:</span> <span class="n">op_count_fun</span><span class="p">,</span>  <span class="c1"># Function to count operations or recursive calls.</span>
            <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Additional properties of the operator, None initially.</span>
            <span class="s2">&quot;dependencies&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Dependencies of the operator, None initially.</span>
            <span class="s2">&quot;is_temporary&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># Flag indicating the operator is temporarily generated.</span>
        <span class="p">}</span>

        <span class="c1"># Log the generated operator data for tracking purposes.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated operator data: </span><span class="si">{</span><span class="n">operator_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">operator_data</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.get_random_recursive_call_operator" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_random_recursive_call_operator</span><span class="p">(</span><span class="n">order</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Selects a random operator that supports recursion from the operator manager.</p>
<p>This method filters the operators managed by the <code>operator_manager</code> to find those
that have recursion enabled (i.e., <code>is_recursion_enabled</code> is True). It then selects
a random operator from the filtered list and returns the corresponding <code>OperatorInfo</code> object.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no operators are available in the operator manager.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If no operators with recursion enabled are available.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>OperatorInfo</code></td>            <td>
                  <code><span title="operatorplus.operator_info.OperatorInfo">OperatorInfo</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The selected operator's <code>OperatorInfo</code> object, including its ID, symbol, and other properties.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_random_recursive_call_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OperatorInfo</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Selects a random operator that supports recursion from the operator manager.</span>

<span class="sd">    This method filters the operators managed by the `operator_manager` to find those</span>
<span class="sd">    that have recursion enabled (i.e., `is_recursion_enabled` is True). It then selects</span>
<span class="sd">    a random operator from the filtered list and returns the corresponding `OperatorInfo` object.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If no operators are available in the operator manager.</span>
<span class="sd">        ValueError: If no operators with recursion enabled are available.</span>

<span class="sd">    Returns:</span>
<span class="sd">        OperatorInfo: The selected operator&#39;s `OperatorInfo` object, including its ID, symbol, and other properties.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Attempting to get a random recursive call operator.&quot;</span><span class="p">)</span>

    <span class="c1"># Check if there are any operators available in the operator manager</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span><span class="o">.</span><span class="n">operators</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;No operators available in the operator manager.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No operators available.&quot;</span><span class="p">)</span>

    <span class="c1"># Filter operators that have recursion enabled</span>
    <span class="n">recursive_operators</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">operator_id</span><span class="p">,</span> <span class="n">operator_info</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">operator_id</span><span class="p">,</span> <span class="n">operator_info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator_manager</span><span class="o">.</span><span class="n">operators</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">operator_info</span><span class="o">.</span><span class="n">n_order</span><span class="o">==</span><span class="n">order</span><span class="o">-</span><span class="mi">1</span>
    <span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Filtered operators with recursion enabled: </span><span class="si">{</span><span class="n">recursive_operators</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="c1"># If no operators with recursion are available, raise an exception</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">recursive_operators</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;No operators with recursion enabled.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No operators with recursion enabled.&quot;</span><span class="p">)</span>

    <span class="c1"># Randomly select one operator from the filtered list</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">operator_info</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">recursive_operators</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Selected operator: </span><span class="si">{</span><span class="n">operator_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Return the `OperatorInfo` instance instead of a tuple</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Random recursive call operator selected: </span><span class="si">{</span><span class="n">operator_info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">operator_info</span>  <span class="c1"># Returning an instance of OperatorInfo</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.get_unicode_symbols" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_unicode_symbols</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Collects valid Unicode operator symbols from predefined ranges.</p>
<p>This method retrieves symbols from several mathematical and arrow ranges in Unicode:
- Mathematical Operators (U+2200 to U+22FF)
- Supplemental Mathematical Operators (U+2A00 to U+2AFF)
- Arrows (U+2190 to U+21FF)</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of valid Unicode operator symbols.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_unicode_symbols</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Collects valid Unicode operator symbols from predefined ranges.</span>

<span class="sd">    This method retrieves symbols from several mathematical and arrow ranges in Unicode:</span>
<span class="sd">    - Mathematical Operators (U+2200 to U+22FF)</span>
<span class="sd">    - Supplemental Mathematical Operators (U+2A00 to U+2AFF)</span>
<span class="sd">    - Arrows (U+2190 to U+21FF)</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of valid Unicode operator symbols.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Collecting Unicode symbols from predefined ranges.&quot;</span><span class="p">)</span>
    <span class="n">unicode_ranges</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="mh">0x2200</span><span class="p">,</span> <span class="mh">0x22FF</span><span class="p">),</span>  <span class="c1"># Mathematical Operators</span>
        <span class="p">(</span><span class="mh">0x2A00</span><span class="p">,</span> <span class="mh">0x2AFF</span><span class="p">),</span>  <span class="c1"># Supplemental Mathematical Operators</span>
        <span class="p">(</span><span class="mh">0x2190</span><span class="p">,</span> <span class="mh">0x21FF</span><span class="p">),</span>  <span class="c1"># Arrows</span>
    <span class="p">]</span>

    <span class="n">symbols</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="ow">in</span> <span class="n">unicode_ranges</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">codepoint</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">char</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">codepoint</span><span class="p">)</span>
            <span class="n">symbols</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Collected </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">symbols</span><span class="p">)</span><span class="si">}</span><span class="s2"> Unicode symbols.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">symbols</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.random_operator" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">random_operator</span><span class="p">(</span><span class="n">existing_symbols</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generates a random operator string composed of one or more valid symbols.</p>
<p>This method generates a random operator string with a length between
<code>operator_symbol_min_len</code> and <code>operator_symbol_max_len</code>, ensuring that
the generated operator does not already exist in the list of <code>existing_symbols</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>existing_symbols</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of currently existing operator symbols.
                            The new symbol must not be in this list.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The generated random operator string that is unique and within the specified length range.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">random_operator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">existing_symbols</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a random operator string composed of one or more valid symbols.</span>

<span class="sd">    This method generates a random operator string with a length between</span>
<span class="sd">    `operator_symbol_min_len` and `operator_symbol_max_len`, ensuring that</span>
<span class="sd">    the generated operator does not already exist in the list of `existing_symbols`.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        existing_symbols (List[str]): A list of currently existing operator symbols.</span>
<span class="sd">                                        The new symbol must not be in this list.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The generated random operator string that is unique and within the specified length range.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating a random operator string.&quot;</span><span class="p">)</span>

    <span class="c1"># Loop until a unique operator is generated</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># Randomly choose a length for the operator within the specified range</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">operator_symbol_min_len</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator_symbol_max_len</span>
        <span class="p">)</span>

        <span class="c1"># Generate the new symbol by randomly picking characters from valid symbols</span>
        <span class="n">new_symbol</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valid_symbols</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Check if the generated symbol is unique (not in existing_symbols)</span>
        <span class="k">if</span> <span class="n">new_symbol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">existing_symbols</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Generated new operator symbol: </span><span class="si">{</span><span class="n">new_symbol</span><span class="si">}</span><span class="s2"> with length </span><span class="si">{</span><span class="n">length</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">new_symbol</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Generated operator </span><span class="si">{</span><span class="n">new_symbol</span><span class="si">}</span><span class="s2"> already exists. Retrying...&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="opulse.operatorplus.operator_generator.OperatorGenerator.random_operator_type_and_position" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">random_operator_type_and_position</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Generates a random operator type and its position (if applicable).</p>
<p>This method randomly selects an operator type, either "unary" or "binary".
If the type is "unary", it also randomly chooses its position, either "prefix" or "postfix".
For "binary" operators, the position is not applicable (set to None).</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>tuple</code></td>            <td>
                  <code>tuple</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A tuple containing the operator type and its position.
If the operator type is "unary", the position is either "prefix" or "postfix".
If the operator type is "binary", the position is None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>opulse/operatorplus/operator_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">random_operator_type_and_position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a random operator type and its position (if applicable).</span>

<span class="sd">    This method randomly selects an operator type, either &quot;unary&quot; or &quot;binary&quot;.</span>
<span class="sd">    If the type is &quot;unary&quot;, it also randomly chooses its position, either &quot;prefix&quot; or &quot;postfix&quot;.</span>
<span class="sd">    For &quot;binary&quot; operators, the position is not applicable (set to None).</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: A tuple containing the operator type and its position.</span>
<span class="sd">            If the operator type is &quot;unary&quot;, the position is either &quot;prefix&quot; or &quot;postfix&quot;.</span>
<span class="sd">            If the operator type is &quot;binary&quot;, the position is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Generating random operator type and position.&quot;</span><span class="p">)</span>

    <span class="c1"># Randomly select the operator type</span>
    <span class="n">op_type</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;unary&quot;</span><span class="p">,</span> <span class="s2">&quot;binary&quot;</span><span class="p">])</span>

    <span class="c1"># Initialize unary_position as None</span>
    <span class="n">unary_position</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># If the operator type is &quot;unary&quot;, randomly choose its position</span>
    <span class="k">if</span> <span class="n">op_type</span> <span class="o">==</span> <span class="s2">&quot;unary&quot;</span><span class="p">:</span>
        <span class="n">unary_position</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s2">&quot;prefix&quot;</span><span class="p">,</span> <span class="s2">&quot;postfix&quot;</span><span class="p">])</span>

    <span class="c1"># Log the final operator type and position</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Operator type: </span><span class="si">{</span><span class="n">op_type</span><span class="si">}</span><span class="s2">, Position: </span><span class="si">{</span><span class="n">unary_position</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">unary_position</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;None&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">op_type</span><span class="p">,</span> <span class="n">unary_position</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Opulse Team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>